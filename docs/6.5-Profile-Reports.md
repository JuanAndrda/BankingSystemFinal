# Banking System - Profile Operations & Reports Documentation

**Project:** Banking Management System Final Project
**Courses:** CIT 207 & CC 204
**Document:** Profile Operations & Reports - Admin #14-19
**Date:** December 2025

---

## ğŸ“‘ Navigation

**â† Back to:** [Transaction Operations](6.4-Transaction-Ops.md) | **Next:** [Security & Session Management â†’](6.6-Security-Session.md)

**Menu Documentation Index:**
- [6-Menu-Overview.md](6-Menu-Overview.md) - Architecture and summary tables
- [6.1-Login.md](6.1-Login.md) - Login Screen
- [6.2-Customer-Ops.md](6.2-Customer-Ops.md) - Customer Operations (Admin #1-4)
- [6.3-Account-Ops.md](6.3-Account-Ops.md) - Account Operations (Admin #5-9)
- [6.4-Transaction-Ops.md](6.4-Transaction-Ops.md) - Transaction Operations (Admin #10-13, Customer #2-5)
- **6.5-Profile-Reports.md** - â† You are here
- [6.6-Security-Session.md](6.6-Security-Session.md) - Security & Session (Admin #21, #0, #20)

---

## Overview

This document covers **6 admin-only menu options** focused on customer profile management, bulk operations, sorting algorithms, and audit trail monitoring. These operations demonstrate:

- **One-to-One Relationship:** Customer â†” CustomerProfile bidirectional link
- **Sorting Algorithms:** Insertion Sort (ascending by name, descending by balance)
- **Bulk Operations:** Apply interest to all Savings accounts
- **Stack Data Structure:** Audit Trail with LIFO display
- **Polymorphism:** SavingsAccount interest calculation

---

## Admin #14: Create/Update Customer Profile

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Menu Number** | 14 |
| **Customer Menu Number** | N/A (Admin-only) |
| **Menu Label** | "Create/Update Customer Profile" |
| **MenuAction Enum** | `CREATE_CUSTOMER_PROFILE` |
| **Handler Method** | `CustomerManager.handleCreateCustomerProfile()` |
| **Source File** | `src/com/banking/managers/CustomerManager.java:196-228` |
| **Access Restrictions** | Admin-only (customers cannot create profiles) |
| **OOP Concept** | **One-to-One Relationship** (Customer â†” CustomerProfile) |

---

### 2. Purpose and Functionality

**What it does:**
- Creates or updates a CustomerProfile linked to a specific Customer
- Auto-generates unique Profile ID (P001, P002, etc.)
- Establishes bidirectional one-to-one relationship
- Validates email and phone format
- Confirms replacement if profile already exists

**Why it exists:**
- Customer data (name, ID) is separate from contact details (address, phone, email)
- Demonstrates one-to-one relationship pattern
- Allows profile updates without modifying Customer object
- Professional separation of identity vs. contact information

**Business Rules:**
- One customer can have **at most one profile** (one-to-one)
- Profile ID auto-generated (P### format)
- Email must be valid format (contains @)
- Phone must be at least 10 digits
- Admin confirmation required to replace existing profile

---

### 3. Step-by-Step Code Flow

#### Step 1: Selection (User Input)
**Location:** `BankingSystem.java:466` â†’ `CustomerManager.java:196`

User selects option **14** from Admin Menu. BankingSystem routes to `handleCreateCustomerProfile()`.

#### Step 2: Permission Check (Access Control)
**Location:** Implicit (Admin-only menu)

Only Admin users see option 14. No explicit permission check needed - menu option is invisible to customers.

#### Step 3: Input Collection (Validation)
**Location:** `CustomerManager.java:198-227`

```java
// Get and validate Customer ID
String custId = this.validator.getValidatedInput("Customer ID (to link profile to):",
        ValidationPatterns.CUSTOMER_ID_PATTERN,
        "(format: C### e.g., C001)");
if (custId == null) return;  // User cancelled

Customer customer = this.findCustomer(custId);
if (customer == null) {
    UIFormatter.printError("Customer not found");
    return;
}

// Check if profile already exists (one-to-one constraint)
if (customer.getProfile() != null) {
    System.out.println("âš  This customer already has a profile.");
    if (!this.validator.confirmAction("Do you want to replace it?")) {
        UIFormatter.printInfo("Operation cancelled.");
        return;
    }
}

// Auto-generate Profile ID
String profileId = this.generateNextProfileId();  // P001, P002...
UIFormatter.printSuccess("Profile ID auto-generated: " + profileId);

// Get profile details (address, phone, email)
String[] profileDetails = this.promptForProfileDetails();
if (profileDetails == null) return;  // User cancelled
```

**Validation Rules:**
- Customer ID matches pattern `C\d{3}` (C001-C999)
- Customer must exist in system
- Email must contain `@` and have text before/after
- Phone must be at least 10 digits (numeric)
- User confirms profile replacement if exists

#### Step 4: Business Logic (Profile Creation)
**Location:** `CustomerManager.java:159-194`

```java
public boolean createOrUpdateProfile(String customerId, String profileId,
                                    String address, String phone, String email,
                                    boolean isNewProfile) {
    // Find the customer
    Customer customer = this.findCustomer(customerId);
    if (customer == null) {
        UIFormatter.printError("Customer not found");
        return false;
    }

    try {
        // Create CustomerProfile object
        CustomerProfile profile = new CustomerProfile(profileId, address, phone, email);

        // ONE-TO-ONE RELATIONSHIP: Link profile to customer
        customer.setProfile(profile);  // Customer â†’ Profile
        // Profile constructor already set Profile â†’ Customer (bidirectional)

        UIFormatter.printSuccess("Profile created/updated for customer: " + customer.getName());
        System.out.println(profile);

        // Verify bidirectional relationship
        if (profile.getCustomer() != null && profile.getCustomer().equals(customer)) {
            UIFormatter.printInfo("One-to-one relationship successfully established!");
        }
        return true;
    } catch (IllegalArgumentException e) {
        UIFormatter.printError("Error creating profile: " + e.getMessage());
        return false;
    }
}
```

**One-to-One Relationship:**
```java
// In Customer.java
public void setProfile(CustomerProfile profile) {
    this.profile = profile;           // Customer â†’ Profile
    if (profile != null) {
        profile.setCustomer(this);    // Profile â†’ Customer (bidirectional)
    }
}

// In CustomerProfile.java (constructor)
public CustomerProfile(String profileId, String address, String phone, String email) {
    this.profileId = profileId;
    this.address = address;
    this.phone = phone;
    this.email = email;
    this.customer = null;  // Set by Customer.setProfile()
}
```

#### Step 5: Data Structure Updates
**Location:** Customer object in `LinkedList<Customer>`

**Before:**
```
LinkedList<Customer>: [C001(Alice), C002(Bob), ...]
Customer C001:
  - customerId: "C001"
  - name: "Alice Johnson"
  - profile: null  â† NO PROFILE
  - accounts: []
```

**After:**
```
LinkedList<Customer>: [C001(Alice), C002(Bob), ...]
Customer C001:
  - customerId: "C001"
  - name: "Alice Johnson"
  - profile: CustomerProfile@P001  â† ONE-TO-ONE LINK
      â”œâ”€ profileId: "P001"
      â”œâ”€ address: "123 Main St"
      â”œâ”€ phone: "5551234567"
      â”œâ”€ email: "alice@example.com"
      â””â”€ customer: Customer@C001  â† BIDIRECTIONAL
  - accounts: []
```

#### Step 6: User Feedback (Console Output)
**Location:** `CustomerManager.java:179-189`

```
âœ“ Profile ID auto-generated: P001
âœ“ Profile created/updated for customer: Alice Johnson
Profile[P001] - Address: 123 Main St, Phone: 5551234567, Email: alice@example.com
â„¹ One-to-one relationship successfully established!
```

#### Step 7: Audit Logging
**Location:** Implicit (embedded in InputValidator)

No explicit audit logging for this operation (not a security-critical action). Profile creation is logged as part of customer creation flow.

---

### 4. Code Snippets

#### Auto-Generate Profile ID

**File:** `CustomerManager.java:72-94`

```java
public String generateNextProfileId() {
    int maxId = 0;

    // Iterate through all customers to find highest profile ID
    for (Customer c : this.customers) {  // LinkedList iteration
        CustomerProfile profile = c.getProfile();
        if (profile != null) {
            String id = profile.getProfileId();
            if (id.startsWith("P") && id.length() == 4) {
                try {
                    int num = Integer.parseInt(id.substring(1));  // Extract number
                    if (num > maxId) {
                        maxId = num;
                    }
                } catch (NumberFormatException e) {
                    // Skip invalid IDs (shouldn't happen)
                }
            }
        }
    }

    // Return next ID: P001, P002, P003...
    return "P" + String.format("%03d", maxId + 1);
}
```

**Algorithm:** Linear search through customers, parse profile IDs, find max, increment.

#### Prompt for Profile Details

**File:** `CustomerManager.java:532-543`

```java
private String[] promptForProfileDetails() {
    String address = this.validator.getValidatedString("Address");
    if (address == null) return null;  // User cancelled

    String phone = this.validator.getValidatedPhoneNumber("Phone (min 10 digits)");
    if (phone == null) return null;

    String email = this.validator.getValidatedEmail("Email");
    if (email == null) return null;

    return new String[]{address, phone, email};
}
```

**Validation Methods:**
- `getValidatedString()` - Non-empty trimmed string
- `getValidatedPhoneNumber()` - Min 10 digits, numeric only
- `getValidatedEmail()` - Must contain `@` with text before/after

---

### 5. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CREATE/UPDATE CUSTOMER PROFILE FLOW                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin selects option 14
    â”‚
    â”œâ”€â”€â†’ Prompt: Customer ID (C###)
    â”‚         â”œâ”€â”€â†’ Validate format (Regex)
    â”‚         â””â”€â”€â†’ Find Customer in LinkedList<Customer>
    â”‚
    â”œâ”€â”€â†’ Check: customer.getProfile() != null?
    â”‚         â”œâ”€â”€â†’ YES: Confirm replacement
    â”‚         â””â”€â”€â†’ NO: Continue
    â”‚
    â”œâ”€â”€â†’ Auto-generate Profile ID
    â”‚         â””â”€â”€â†’ Scan all customers' profiles, find max ID, increment
    â”‚
    â”œâ”€â”€â†’ Prompt: Address, Phone, Email
    â”‚         â”œâ”€â”€â†’ Validate Phone (min 10 digits)
    â”‚         â””â”€â”€â†’ Validate Email (contains @)
    â”‚
    â”œâ”€â”€â†’ Create CustomerProfile object
    â”‚         â””â”€â”€â†’ new CustomerProfile(profileId, address, phone, email)
    â”‚
    â”œâ”€â”€â†’ Establish One-to-One Relationship
    â”‚         â”œâ”€â”€â†’ customer.setProfile(profile)      [Customer â†’ Profile]
    â”‚         â””â”€â”€â†’ profile.setCustomer(customer)     [Profile â†’ Customer]
    â”‚
    â””â”€â”€â†’ Display success message
              â””â”€â”€â†’ Verify bidirectional link
```

---

### 6. Example Usage

#### Scenario 1: Create Profile (Success)

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ CREATE/UPDATE CUSTOMER PROFILE     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Customer ID (to link profile to): C001
âœ“ Profile ID auto-generated: P001

â†’ Address: 123 Main Street, Springfield
â†’ Phone (min 10 digits): 5551234567
â†’ Email: alice.johnson@example.com

âœ“ Profile created/updated for customer: Alice Johnson
Profile[P001] - Address: 123 Main Street, Springfield, Phone: 5551234567, Email: alice.johnson@example.com
â„¹ One-to-one relationship successfully established!
```

**Data After:**
```java
Customer C001:
  â”œâ”€ customerId: "C001"
  â”œâ”€ name: "Alice Johnson"
  â”œâ”€ profile: CustomerProfile@P001
  â”‚     â”œâ”€ profileId: "P001"
  â”‚     â”œâ”€ address: "123 Main Street, Springfield"
  â”‚     â”œâ”€ phone: "5551234567"
  â”‚     â”œâ”€ email: "alice.johnson@example.com"
  â”‚     â””â”€ customer: Customer@C001  â† BIDIRECTIONAL LINK
  â””â”€ accounts: []
```

---

#### Scenario 2: Replace Existing Profile (Confirmation)

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ CREATE/UPDATE CUSTOMER PROFILE     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Customer ID (to link profile to): C001

âš  This customer already has a profile.
â†’ Do you want to replace it? (yes/no): yes

âœ“ Profile ID auto-generated: P001

â†’ Address: 456 Oak Avenue, Shelbyville
â†’ Phone (min 10 digits): 5559876543
â†’ Email: alice.new@example.com

âœ“ Profile created/updated for customer: Alice Johnson
Profile[P001] - Address: 456 Oak Avenue, Shelbyville, Phone: 5559876543, Email: alice.new@example.com
â„¹ One-to-one relationship successfully established!
```

**Before:**
```java
profile: CustomerProfile@P001
  â”œâ”€ address: "123 Main Street, Springfield"
  â”œâ”€ phone: "5551234567"
  â””â”€ email: "alice.johnson@example.com"
```

**After:**
```java
profile: CustomerProfile@P001
  â”œâ”€ address: "456 Oak Avenue, Shelbyville"  â† UPDATED
  â”œâ”€ phone: "5559876543"                      â† UPDATED
  â””â”€ email: "alice.new@example.com"           â† UPDATED
```

---

#### Scenario 3: Error - Invalid Customer ID

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ CREATE/UPDATE CUSTOMER PROFILE     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Customer ID (to link profile to): C999
âœ— Customer not found

[Returns to menu]
```

---

#### Scenario 4: Error - Invalid Email Format

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ CREATE/UPDATE CUSTOMER PROFILE     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Customer ID (to link profile to): C001
âœ“ Profile ID auto-generated: P001

â†’ Address: 123 Main St
â†’ Phone (min 10 digits): 5551234567
â†’ Email: invalidemail

âœ— Invalid email format. Email must contain @ and have text before/after.
â†’ Email: alice@example.com

âœ“ Profile created/updated for customer: Alice Johnson
...
```

---

## Admin #15: Update Profile Information

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Menu Number** | 15 |
| **Customer Menu Number** | N/A (Admin-only) |
| **Menu Label** | "Update Profile Information" |
| **MenuAction Enum** | `UPDATE_CUSTOMER_PROFILE` |
| **Handler Method** | `CustomerManager.handleUpdateCustomerProfile()` |
| **Source File** | `src/com/banking/managers/CustomerManager.java:230-301` |
| **Access Restrictions** | Admin-only |
| **OOP Concept** | **Encapsulation** (profile field updates) |

---

### 2. Purpose and Functionality

**What it does:**
- Updates individual fields of an existing CustomerProfile
- Allows selective updates (address OR phone OR email)
- Displays current values before prompting for new ones
- Validates new input before updating

**Why it exists:**
- Minor profile updates shouldn't require replacing entire profile
- User-friendly field-specific editing
- Demonstrates encapsulation (setter methods with validation)

**Business Rules:**
- Customer must have existing profile (cannot update non-existent profile)
- User selects which field to update (1=Address, 2=Phone, 3=Email)
- New value must pass validation before update
- Only one field updated per operation

---

### 3. Step-by-Step Code Flow

#### Step 1-2: Selection & Permission
User selects option **15** (Admin-only menu).

#### Step 3: Input Collection
**Location:** `CustomerManager.java:230-240`

```java
// Get customer WITH profile (validation)
Customer customer = this.validator.getValidatedCustomerWithProfile();
if (customer == null) return;  // No profile or cancelled

CustomerProfile profile = customer.getProfile();

// Display current values
System.out.println("\nCurrent Profile:");
UIFormatter.printDataRow("Address:", profile.getAddress());
UIFormatter.printDataRow("Phone:", profile.getPhone());
UIFormatter.printDataRow("Email:", profile.getEmail());

// Display update menu
System.out.println("\n--- What would you like to update? ---");
System.out.println("1. Address");
System.out.println("2. Phone");
System.out.println("3. Email");
System.out.println("0. Cancel");
```

#### Step 4: Business Logic (Selective Update)
**Location:** `CustomerManager.java:242-301`

```java
// Retry loop for menu choice
while (true) {
    String input = sc.nextLine().trim();

    // Parse choice
    int choice;
    try {
        choice = Integer.parseInt(input);
    } catch (NumberFormatException e) {
        UIFormatter.printError("Invalid input. Please enter 1, 2, 3, or 0.");
        continue;  // RETRY
    }

    switch (choice) {
        case 1:  // Update Address
            String newAddress = this.validator.getValidatedString("New Address");
            if (newAddress != null) {
                profile.setAddress(newAddress);  // ENCAPSULATION
                UIFormatter.printSuccess("Address updated");
            }
            return;
        case 2:  // Update Phone
            String newPhone = this.validator.getValidatedPhoneNumber("New Phone (min 10 digits)");
            if (newPhone != null) {
                profile.setPhone(newPhone);
                UIFormatter.printSuccess("Phone updated");
            }
            return;
        case 3:  // Update Email
            String newEmail = this.validator.getValidatedEmail("New Email");
            if (newEmail != null) {
                profile.setEmail(newEmail);
                UIFormatter.printSuccess("Email updated");
            }
            return;
        case 0:
            UIFormatter.printInfo("Update cancelled");
            return;
        default:
            UIFormatter.printError("Invalid choice. Please enter 1, 2, 3, or 0.");
            continue;  // RETRY
    }
}
```

#### Step 5: Data Structure Updates
**Location:** CustomerProfile object (referenced by Customer in LinkedList)

**Before:**
```java
CustomerProfile@P001:
  â”œâ”€ address: "123 Main St"
  â”œâ”€ phone: "5551234567"
  â””â”€ email: "alice@example.com"
```

**After (Phone updated):**
```java
CustomerProfile@P001:
  â”œâ”€ address: "123 Main St"          â† UNCHANGED
  â”œâ”€ phone: "5559999999"              â† UPDATED
  â””â”€ email: "alice@example.com"      â† UNCHANGED
```

#### Step 6-7: Feedback & Audit
```
âœ“ Phone updated
```

No audit logging (not security-critical).

---

### 4. Code Snippets

#### Validate Customer Has Profile

**File:** `InputValidator.java` (helper method)

```java
public Customer getValidatedCustomerWithProfile() {
    Customer customer = this.getValidatedCustomer("âœ— Customer not found.");
    if (customer == null) return null;

    if (customer.getProfile() == null) {
        UIFormatter.printError("This customer does not have a profile yet. Use option 14 to create one.");
        return null;
    }

    return customer;
}
```

---

### 5. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  UPDATE PROFILE INFORMATION FLOW                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin selects option 15
    â”‚
    â”œâ”€â”€â†’ Get Customer with Profile
    â”‚         â”œâ”€â”€â†’ Prompt Customer ID
    â”‚         â””â”€â”€â†’ Verify profile != null
    â”‚
    â”œâ”€â”€â†’ Display Current Values
    â”‚         â”œâ”€ Address: "123 Main St"
    â”‚         â”œâ”€ Phone: "5551234567"
    â”‚         â””â”€ Email: "alice@example.com"
    â”‚
    â”œâ”€â”€â†’ Display Update Menu
    â”‚         â”œâ”€ [1] Address
    â”‚         â”œâ”€ [2] Phone
    â”‚         â”œâ”€ [3] Email
    â”‚         â””â”€ [0] Cancel
    â”‚
    â”œâ”€â”€â†’ User selects field (1, 2, or 3)
    â”‚
    â”œâ”€â”€â†’ Prompt for new value
    â”‚         â”œâ”€â”€â†’ Validate Phone (min 10 digits) OR
    â”‚         â””â”€â”€â†’ Validate Email (contains @)
    â”‚
    â”œâ”€â”€â†’ Update selected field
    â”‚         â””â”€â”€â†’ profile.setAddress() / setPhone() / setEmail()
    â”‚
    â””â”€â”€â†’ Display success message
```

---

### 6. Example Usage

#### Scenario 1: Update Phone Number

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ UPDATE CUSTOMER PROFILE            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Customer ID: C001

Current Profile:
  Address:  123 Main Street
  Phone:    5551234567
  Email:    alice@example.com

--- What would you like to update? ---
1. Address
2. Phone
3. Email
0. Cancel

â†’ Choice: 2
â†’ New Phone (min 10 digits): 5559876543

âœ“ Phone updated
```

**Data Change:**
```
BEFORE: phone = "5551234567"
AFTER:  phone = "5559876543"
```

---

## Admin #16: Apply Interest (All Savings Accounts)

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Menu Number** | 16 |
| **Customer Menu Number** | N/A (Admin-only bulk operation) |
| **Menu Label** | "Apply Interest (All Savings Accounts)" |
| **MenuAction Enum** | `APPLY_INTEREST` |
| **Handler Method** | `AccountManager.handleApplyInterest()` |
| **Source File** | `src/com/banking/managers/AccountManager.java:310-355` |
| **Access Restrictions** | Admin-only (bulk financial operation) |
| **OOP Concept** | **Polymorphism** (SavingsAccount-specific method) |

---

### 2. Purpose and Functionality

**What it does:**
- Applies interest to ALL Savings accounts in the system
- Uses polymorphism (`instanceof` check + downcast)
- Displays before/after balance with interest earned
- Shows results in professional table format
- Skips Checking accounts (no interest)

**Why it exists:**
- Simulates end-of-month interest posting
- Demonstrates bulk operations on filtered data
- Shows polymorphic method calls (only SavingsAccount has `applyInterest()`)
- Real-world banking operation

**Business Rules:**
- Only SavingsAccount earns interest (Checking accounts do not)
- Interest rate: 3% annual (0.25% monthly in implementation)
- Interest is compounded (added to balance immediately)
- Admin operation only (customers cannot trigger bulk operations)

---

### 3. Step-by-Step Code Flow

#### Step 1-2: Selection & Permission
User selects option **16** (Admin-only).

#### Step 3: Input Collection
**Location:** No input required (bulk operation on all accounts)

#### Step 4: Business Logic (Polymorphic Interest Calculation)
**Location:** `AccountManager.java:310-355`

```java
public void handleApplyInterest() {
    UIFormatter.printSectionHeader("APPLY INTEREST (All Savings Accounts)");

    if (this.accountList.isEmpty()) {
        UIFormatter.printInfo("No accounts found. Use option 5 (Create Account) to add one.");
        return;
    }

    // Collect savings accounts and calculate interest
    LinkedList<String[]> interestResults = new LinkedList<>();

    for (Account acc : this.accountList) {  // Iterate all accounts
        // POLYMORPHISM: Runtime type check
        if (acc instanceof SavingsAccount) {
            SavingsAccount savings = (SavingsAccount) acc;  // Downcast

            double oldBalance = savings.getBalance();
            savings.applyInterest();  // SavingsAccount-specific method
            double newBalance = savings.getBalance();
            double interestEarned = newBalance - oldBalance;

            // Store results for display
            interestResults.add(new String[]{
                savings.getAccountNo(),
                "$" + String.format("%.2f", oldBalance),
                "$" + String.format("%.2f", newBalance),
                "$" + String.format("%.2f", interestEarned)
            });
        }
        // else: Skip CheckingAccount (no applyInterest() method)
    }

    if (interestResults.isEmpty()) {
        UIFormatter.printInfo("No savings accounts found. Create accounts using option 5 and select SAVINGS type.");
        return;
    }

    // Display results in table format
    System.out.println("\nInterest Applied: " + interestResults.size() + " savings account(s)");
    System.out.println();

    UIFormatter.printTableHeader("Account No", "Old Balance", "New Balance", "Interest Earned");
    for (String[] result : interestResults) {
        UIFormatter.printTableRow(result[0], result[1], result[2], result[3]);
    }
    UIFormatter.printTableFooter();

    UIFormatter.printSuccessEnhanced(
        "Interest applied successfully!",
        "Accounts Updated: " + interestResults.size(),
        "Status: Completed"
    );

    InputValidator.safeLogAction(bankingSystem, "APPLY_INTEREST",
        "Interest applied to " + interestResults.size() + " savings account(s)");
}
```

#### Step 5: Data Structure Updates
**Location:** SavingsAccount balance modified in LinkedList<Account>

**Before:**
```
LinkedList<Account>:
â”œâ”€ SavingsAccount@ACC001  (balance: $1000.00, rate: 3%)
â”œâ”€ CheckingAccount@ACC002 (balance: $500.00)   â† SKIPPED
â””â”€ SavingsAccount@ACC003  (balance: $2000.00, rate: 3%)
```

**After:**
```
LinkedList<Account>:
â”œâ”€ SavingsAccount@ACC001  (balance: $1030.00)  â† +$30 interest
â”œâ”€ CheckingAccount@ACC002 (balance: $500.00)   â† UNCHANGED
â””â”€ SavingsAccount@ACC003  (balance: $2060.00)  â† +$60 interest
```

#### Step 6: User Feedback
```
Interest Applied: 2 savings account(s)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Account No   Old Balance   New Balance   Interest Earned      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ACC001       $1000.00       $1030.00      $30.00              â•‘
â•‘ ACC003       $2000.00       $2060.00      $60.00              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Interest applied successfully!
  Accounts Updated: 2
  Status: Completed
```

#### Step 7: Audit Logging
**Location:** `AccountManager.java:353-354`

```java
InputValidator.safeLogAction(bankingSystem, "APPLY_INTEREST",
    "Interest applied to " + interestResults.size() + " savings account(s)");
```

Logged to `Stack<AuditLog>` for admin review.

---

### 4. Code Snippets

#### SavingsAccount Interest Calculation

**File:** `src/com/banking/accounts/SavingsAccount.java`

```java
public class SavingsAccount extends Account {
    private static final double INTEREST_RATE = 0.03;  // 3% annual

    /**
     * Applies interest to the savings account balance.
     * Interest is calculated as: balance * INTEREST_RATE
     * The interest is added to the balance immediately (compound interest).
     */
    public void applyInterest() {
        double interest = this.balance * INTEREST_RATE;
        this.balance += interest;  // Add interest to balance

        // Optional: Log interest as transaction
        Transaction tx = new Transaction(
            this.generateTransactionId(),
            this.accountNo,
            "INTEREST",
            interest,
            LocalDateTime.now()
        );
        tx.setStatus("COMPLETED");
        this.addTransaction(tx);
    }
}
```

**Why CheckingAccount doesn't have this method:**
- Checking accounts are for daily transactions, not savings
- No interest rate field in CheckingAccount class
- Attempting `checkingAccount.applyInterest()` would cause **compile-time error**

---

### 5. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  APPLY INTEREST (BULK OPERATION) FLOW               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin selects option 16
    â”‚
    â”œâ”€â”€â†’ Iterate LinkedList<Account>
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ For each Account:
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ Runtime Type Check: acc instanceof SavingsAccount?
    â”‚                   â”‚         â”‚
    â”‚                   â”‚         â”œâ”€â”€â†’ YES: Downcast to SavingsAccount
    â”‚                   â”‚         â”‚       â”‚
    â”‚                   â”‚         â”‚       â”œâ”€â”€â†’ Store oldBalance
    â”‚                   â”‚         â”‚       â”œâ”€â”€â†’ Call savings.applyInterest()
    â”‚                   â”‚         â”‚       â”œâ”€â”€â†’ Store newBalance
    â”‚                   â”‚         â”‚       â””â”€â”€â†’ Add to results list
    â”‚                   â”‚         â”‚
    â”‚                   â”‚         â””â”€â”€â†’ NO: Skip (CheckingAccount)
    â”‚                   â”‚
    â”‚                   â””â”€â”€â†’ Continue to next account
    â”‚
    â”œâ”€â”€â†’ Display Results Table
    â”‚         â”œâ”€ Account No | Old Balance | New Balance | Interest Earned
    â”‚         â”œâ”€ ACC001     | $1000.00    | $1030.00    | $30.00
    â”‚         â””â”€ ACC003     | $2000.00    | $2060.00    | $60.00
    â”‚
    â”œâ”€â”€â†’ Log to Audit Trail
    â”‚         â””â”€â”€â†’ auditTrail.push(new AuditLog(...))
    â”‚
    â””â”€â”€â†’ Display success message
```

---

### 6. Example Usage

#### Scenario 1: Apply Interest (Multiple Savings Accounts)

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ APPLY INTEREST (All Savings Accounts) â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Interest Applied: 3 savings account(s)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Account No   Old Balance   New Balance   Interest Earned      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ACC001       $1000.00       $1030.00      $30.00              â•‘
â•‘ ACC003       $5000.00       $5150.00      $150.00             â•‘
â•‘ ACC005       $250.00        $257.50       $7.50               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Interest applied successfully!
  Accounts Updated: 3
  Status: Completed
```

**Data Changes:**
```
SavingsAccount ACC001: $1000.00 â†’ $1030.00  (+$30.00)
CheckingAccount ACC002: $500.00 â†’ $500.00   (SKIPPED)
SavingsAccount ACC003: $5000.00 â†’ $5150.00  (+$150.00)
CheckingAccount ACC004: $1200.00 â†’ $1200.00 (SKIPPED)
SavingsAccount ACC005: $250.00 â†’ $257.50    (+$7.50)
```

---

#### Scenario 2: No Savings Accounts

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ APPLY INTEREST (All Savings Accounts) â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ No savings accounts found. Create accounts using option 5 and select SAVINGS type.
```

---

## Admin #17: Sort Accounts by Name (Insertion Sort)

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Menu Number** | 17 |
| **Customer Menu Number** | N/A (Admin-only) |
| **Menu Label** | "Sort Accounts by Name" |
| **MenuAction Enum** | `SORT_ACCOUNTS_BY_NAME` |
| **Handler Method** | `AccountManager.handleSortByName()` |
| **Source File** | `src/com/banking/managers/AccountManager.java:231-268` |
| **Access Restrictions** | Admin-only (system management) |
| **Algorithm** | **Insertion Sort** (ascending alphabetical order) |
| **Data Structure** | `LinkedList<Account>` (in-place sorting) |

---

### 2. Purpose and Functionality

**What it does:**
- Sorts all accounts alphabetically by customer name (A-Z)
- Uses **Insertion Sort algorithm** (required for project)
- Displays BEFORE and AFTER tables for comparison
- Case-insensitive sorting (Alice = alice)
- Permanently reorders LinkedList

**Why it exists:**
- Demonstrates sorting algorithm implementation
- Useful for admin reports (alphabetical customer listing)
- Educational: shows algorithm efficiency on small datasets
- Insertion Sort chosen for stability and simplicity

**Business Rules:**
- Sorts by **Customer.getName()** (not account number)
- Ascending order (A â†’ Z)
- Case-insensitive (`compareToIgnoreCase()`)
- Handles null owners (empty string fallback)

---

### 3. Step-by-Step Code Flow

#### Step 1-2: Selection & Permission
User selects option **17** (Admin-only).

#### Step 3: Input Collection
**Location:** No input required (operates on entire account list)

#### Step 4: Business Logic (Insertion Sort Algorithm)
**Location:** `AccountManager.java:166-193, 231-268`

**Insertion Sort Implementation:**

```java
private void insertionSortByName(LinkedList<Account> accountList) {
    // For each unsorted element (starting at index 1, first element already "sorted")
    for (int i = 1; i < accountList.size(); i++) {
        // Get current account to insert into sorted portion
        Account currentAccount = accountList.get(i);
        String currentName = (currentAccount.getOwner() != null)
                ? currentAccount.getOwner().getName() : "";

        // Find the correct position to insert currentAccount in sorted portion
        int j = i - 1;
        while (j >= 0) {
            Account compareAccount = accountList.get(j);
            String compareName = (compareAccount.getOwner() != null)
                    ? compareAccount.getOwner().getName() : "";

            // If current name comes before compare name alphabetically, shift right
            if (currentName.compareToIgnoreCase(compareName) < 0) {
                accountList.set(j + 1, compareAccount);  // Shift element right
                j--;  // Continue searching left
            } else {
                break;  // Found correct position - stop searching
            }
        }

        // Insert current account at its correct sorted position
        accountList.set(j + 1, currentAccount);
    }
}
```

**Handler Method (Display Before/After):**

```java
public void handleSortByName() {
    UIFormatter.printSectionHeader("SORT ACCOUNTS BY NAME");

    if (this.accountList.isEmpty()) {
        UIFormatter.printInfo("No accounts found. Use option 5 (Create Account) to add one.");
        return;
    }

    // BEFORE SORTING - Display current order
    System.out.println("\n--- BEFORE SORTING ---");
    System.out.println();
    UIFormatter.printTableHeader("Account No", "Type", "Owner", "Balance");
    for (Account account : this.accountList) {
        String accountNo = account.getAccountNo();
        String type = (account instanceof SavingsAccount) ? "Savings" : "Checking";
        String owner = (account.getOwner() != null) ? account.getOwner().getName() : "N/A";
        String balance = "$" + String.format("%.2f", account.getBalance());
        UIFormatter.printTableRow(accountNo, type, owner, balance);
    }
    UIFormatter.printTableFooter();

    // PERFORM SORT (in-place)
    this.sortAccountsByName();  // Calls insertionSortByName()

    // AFTER SORTING - Display sorted order
    System.out.println("\n--- AFTER SORTING (Alphabetical by Name) ---");
    System.out.println();
    UIFormatter.printTableHeader("Account No", "Type", "Owner", "Balance");
    for (Account account : this.accountList) {
        String accountNo = account.getAccountNo();
        String type = (account instanceof SavingsAccount) ? "Savings" : "Checking";
        String owner = (account.getOwner() != null) ? account.getOwner().getName() : "N/A";
        String balance = "$" + String.format("%.2f", account.getBalance());
        UIFormatter.printTableRow(accountNo, type, owner, balance);
    }
    UIFormatter.printTableFooter();

    UIFormatter.printSuccessEnhanced(
        "Accounts sorted successfully!",
        "Algorithm: Insertion Sort (Ascending)",
        "Sorted By: Customer Name (A-Z)"
    );

    InputValidator.safeLogAction(bankingSystem, "SORT_BY_NAME",
        "Sorted " + this.accountList.size() + " accounts by customer name");
}
```

#### Step 5: Data Structure Updates
**Location:** `LinkedList<Account>` reordered in-place

**Before Sorting:**
```
LinkedList<Account>:
  Index 0: Account[ACC003] Owner: "Zoe Williams"     Balance: $500
  Index 1: Account[ACC001] Owner: "Alice Johnson"    Balance: $1000
  Index 2: Account[ACC004] Owner: "Bob Smith"        Balance: $750
  Index 3: Account[ACC002] Owner: "Charlie Brown"    Balance: $2000
```

**After Sorting (Alphabetical A-Z):**
```
LinkedList<Account>:
  Index 0: Account[ACC001] Owner: "Alice Johnson"    Balance: $1000  â† Moved from index 1
  Index 1: Account[ACC004] Owner: "Bob Smith"        Balance: $750   â† Moved from index 2
  Index 2: Account[ACC002] Owner: "Charlie Brown"    Balance: $2000  â† Moved from index 3
  Index 3: Account[ACC003] Owner: "Zoe Williams"     Balance: $500   â† Moved from index 0
```

**Algorithm Analysis:**
- **Time Complexity:** O(nÂ²) worst case (already sorted in reverse)
- **Space Complexity:** O(1) (in-place sorting, no extra arrays)
- **Stability:** Stable (equal elements maintain relative order)
- **Best for:** Small datasets (n < 100), nearly sorted data

#### Step 6-7: Feedback & Audit
```
âœ“ Accounts sorted by customer name
âœ“ Accounts sorted successfully!
  Algorithm: Insertion Sort (Ascending)
  Sorted By: Customer Name (A-Z)
```

Audit log records sort operation with account count.

---

### 4. Code Snippets

#### Full Insertion Sort Method

**File:** `AccountManager.java:166-193`

```java
/**
 * Insertion Sort algorithm for sorting accounts by customer name (ascending).
 *
 * Time Complexity: O(nÂ²) worst case, O(n) best case (already sorted)
 * Space Complexity: O(1) (in-place sorting)
 * Stability: Stable (equal elements maintain order)
 *
 * @param accountList The LinkedList of accounts to sort
 */
private void insertionSortByName(LinkedList<Account> accountList) {
    // Outer loop: Iterate through unsorted portion (start at index 1)
    for (int i = 1; i < accountList.size(); i++) {
        // Select current element to insert into sorted portion [0...i-1]
        Account currentAccount = accountList.get(i);
        String currentName = (currentAccount.getOwner() != null)
                ? currentAccount.getOwner().getName() : "";

        // Inner loop: Find correct insertion position by shifting elements
        int j = i - 1;
        while (j >= 0) {
            Account compareAccount = accountList.get(j);
            String compareName = (compareAccount.getOwner() != null)
                    ? compareAccount.getOwner().getName() : "";

            // Compare current name with element at j (case-insensitive)
            if (currentName.compareToIgnoreCase(compareName) < 0) {
                // Current comes before compare â†’ shift compare to the right
                accountList.set(j + 1, compareAccount);
                j--;  // Move left to continue searching
            } else {
                // Found correct position â†’ stop searching
                break;
            }
        }

        // Insert current account at correct position (j+1)
        accountList.set(j + 1, currentAccount);
    }
}
```

**Visual Example:**

```
Initial: [Zoe, Alice, Bob, Charlie]
          â†‘
          i=0 (sorted)

Pass 1 (i=1, current="Alice"):
  Sorted: [Zoe]
  Compare: Alice < Zoe? YES â†’ Shift Zoe right
  Result: [Alice, Zoe, Bob, Charlie]

Pass 2 (i=2, current="Bob"):
  Sorted: [Alice, Zoe]
  Compare: Bob < Zoe? YES â†’ Shift Zoe right
  Compare: Bob < Alice? NO â†’ Insert Bob at index 1
  Result: [Alice, Bob, Zoe, Charlie]

Pass 3 (i=3, current="Charlie"):
  Sorted: [Alice, Bob, Zoe]
  Compare: Charlie < Zoe? YES â†’ Shift Zoe right
  Compare: Charlie < Bob? NO â†’ Insert Charlie at index 2
  Result: [Alice, Bob, Charlie, Zoe]

Final: [Alice, Bob, Charlie, Zoe] âœ“ Sorted!
```

---

### 5. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SORT ACCOUNTS BY NAME FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin selects option 17
    â”‚
    â”œâ”€â”€â†’ Display BEFORE table
    â”‚         â”œâ”€ Iterate accountList (original order)
    â”‚         â””â”€ Print: Account No | Type | Owner | Balance
    â”‚
    â”œâ”€â”€â†’ Run Insertion Sort Algorithm
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ For i = 1 to n-1:
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ currentAccount = accountList[i]
    â”‚                   â”œâ”€â”€â†’ currentName = currentAccount.getOwner().getName()
    â”‚                   â”‚
    â”‚                   â””â”€â”€â†’ For j = i-1 down to 0:
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â†’ compareName = accountList[j].getOwner().getName()
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â†’ If currentName < compareName (alphabetically):
    â”‚                             â”‚       â”œâ”€ Shift accountList[j] to right
    â”‚                             â”‚       â””â”€ Continue left (j--)
    â”‚                             â”‚
    â”‚                             â””â”€â”€â†’ Else: Break (found position)
    â”‚                             â”‚
    â”‚                             â””â”€â”€â†’ Insert currentAccount at position j+1
    â”‚
    â”œâ”€â”€â†’ Display AFTER table
    â”‚         â”œâ”€ Iterate accountList (sorted order)
    â”‚         â””â”€ Print: Account No | Type | Owner | Balance
    â”‚
    â”œâ”€â”€â†’ Log to Audit Trail
    â”‚         â””â”€â”€â†’ "Sorted X accounts by customer name"
    â”‚
    â””â”€â”€â†’ Display success message
```

---

### 6. Example Usage

#### Scenario 1: Sort 4 Accounts by Name

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ SORT ACCOUNTS BY NAME              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--- BEFORE SORTING ---

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Account No   Type       Owner             Balance         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ACC003       Savings    Zoe Williams      $500.00         â•‘
â•‘ ACC001       Checking   Alice Johnson     $1000.00        â•‘
â•‘ ACC004       Savings    Bob Smith         $750.00         â•‘
â•‘ ACC002       Checking   Charlie Brown     $2000.00        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Accounts sorted by customer name

--- AFTER SORTING (Alphabetical by Name) ---

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Account No   Type       Owner             Balance         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ACC001       Checking   Alice Johnson     $1000.00        â•‘
â•‘ ACC004       Savings    Bob Smith         $750.00         â•‘
â•‘ ACC002       Checking   Charlie Brown     $2000.00        â•‘
â•‘ ACC003       Savings    Zoe Williams      $500.00         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Accounts sorted successfully!
  Algorithm: Insertion Sort (Ascending)
  Sorted By: Customer Name (A-Z)
```

**Data Transformation:**
```
BEFORE: [Zoe, Alice, Bob, Charlie]
AFTER:  [Alice, Bob, Charlie, Zoe]  â† Alphabetical order
```

---

## Admin #18: Sort Accounts by Balance (Insertion Sort Descending)

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Menu Number** | 18 |
| **Customer Menu Number** | N/A (Admin-only) |
| **Menu Label** | "Sort Accounts by Balance" |
| **MenuAction Enum** | `SORT_ACCOUNTS_BY_BALANCE` |
| **Handler Method** | `AccountManager.handleSortByBalance()` |
| **Source File** | `src/com/banking/managers/AccountManager.java:270-307` |
| **Access Restrictions** | Admin-only (financial reporting) |
| **Algorithm** | **Insertion Sort** (descending order, highest first) |
| **Data Structure** | `LinkedList<Account>` (in-place sorting) |

---

### 2. Purpose and Functionality

**What it does:**
- Sorts all accounts by balance (highest â†’ lowest)
- Uses **Insertion Sort algorithm** in descending order
- Displays BEFORE and AFTER tables
- Useful for identifying high-value accounts
- Permanently reorders LinkedList

**Why it exists:**
- Financial reporting (identify top accounts)
- Risk management (prioritize high-balance customers)
- Demonstrates algorithm adaptation (descending vs ascending)
- Same algorithm as #17, different comparison logic

**Business Rules:**
- Sorts by `account.getBalance()` (numeric, not alphabetic)
- Descending order (highest first: $5000 â†’ $100)
- Works for both Savings and Checking accounts

---

### 3. Step-by-Step Code Flow

#### Step 4: Business Logic (Insertion Sort Descending)
**Location:** `AccountManager.java:200-224`

```java
private void insertionSortByBalance(LinkedList<Account> accountList) {
    // Iterate through each account starting from index 1
    for (int i = 1; i < accountList.size(); i++) {
        Account currentAccount = accountList.get(i);
        double currentBalance = currentAccount.getBalance();

        // Find the correct position to insert currentAccount (descending order)
        int j = i - 1;
        while (j >= 0) {
            Account compareAccount = accountList.get(j);
            double compareBalance = compareAccount.getBalance();

            // DESCENDING: If current balance is GREATER than compare balance, shift right
            if (currentBalance > compareBalance) {
                accountList.set(j + 1, compareAccount);  // Shift right
                j--;
            } else {
                break;  // Found correct position
            }
        }

        // Insert current account at correct position
        accountList.set(j + 1, currentAccount);
    }
}
```

**Key Difference from Sort by Name:**
```java
// Sort by Name (ASCENDING):
if (currentName.compareToIgnoreCase(compareName) < 0) { ... }  // "Alice" < "Bob"

// Sort by Balance (DESCENDING):
if (currentBalance > compareBalance) { ... }  // $5000 > $1000
```

#### Step 5: Data Structure Updates

**Before Sorting:**
```
LinkedList<Account>:
  Index 0: Account[ACC001] Balance: $250.00
  Index 1: Account[ACC002] Balance: $5000.00
  Index 2: Account[ACC003] Balance: $1000.00
  Index 3: Account[ACC004] Balance: $750.00
```

**After Sorting (Descending by Balance):**
```
LinkedList<Account>:
  Index 0: Account[ACC002] Balance: $5000.00  â† Highest (moved from index 1)
  Index 1: Account[ACC003] Balance: $1000.00  â† (moved from index 2)
  Index 2: Account[ACC004] Balance: $750.00   â† (moved from index 3)
  Index 3: Account[ACC001] Balance: $250.00   â† Lowest (moved from index 0)
```

---

### 4. Code Snippets

#### Handler Method (Display Before/After)

**File:** `AccountManager.java:270-307`

```java
public void handleSortByBalance() {
    UIFormatter.printSectionHeader("SORT ACCOUNTS BY BALANCE");

    if (this.accountList.isEmpty()) {
        UIFormatter.printInfo("No accounts found. Use option 5 (Create Account) to add one.");
        return;
    }

    // Display BEFORE table
    System.out.println("\n--- BEFORE SORTING ---");
    // [Same display logic as Sort by Name]

    // Perform sort
    this.sortAccountsByBalance();  // Calls insertionSortByBalance()

    // Display AFTER table
    System.out.println("\n--- AFTER SORTING (Descending by Balance) ---");
    // [Same display logic]

    UIFormatter.printSuccessEnhanced(
        "Accounts sorted successfully!",
        "Algorithm: Insertion Sort (Descending)",
        "Sorted By: Balance (High to Low)"
    );

    InputValidator.safeLogAction(bankingSystem, "SORT_BY_BALANCE",
        "Sorted " + this.accountList.size() + " accounts by balance");
}
```

---

### 5. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SORT ACCOUNTS BY BALANCE FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin selects option 18
    â”‚
    â”œâ”€â”€â†’ Display BEFORE table
    â”‚
    â”œâ”€â”€â†’ Run Insertion Sort Algorithm (DESCENDING)
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ For i = 1 to n-1:
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ currentBalance = accountList[i].getBalance()
    â”‚                   â”‚
    â”‚                   â””â”€â”€â†’ For j = i-1 down to 0:
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â†’ compareBalance = accountList[j].getBalance()
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â†’ If currentBalance > compareBalance:
    â”‚                             â”‚       â”œâ”€ Shift accountList[j] to right
    â”‚                             â”‚       â””â”€ Continue left (j--)
    â”‚                             â”‚
    â”‚                             â””â”€â”€â†’ Else: Break (found position)
    â”‚                             â”‚
    â”‚                             â””â”€â”€â†’ Insert currentAccount at position j+1
    â”‚
    â”œâ”€â”€â†’ Display AFTER table
    â”‚
    â””â”€â”€â†’ Log to Audit Trail
```

---

### 6. Example Usage

#### Scenario 1: Sort Accounts by Balance

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ SORT ACCOUNTS BY BALANCE           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--- BEFORE SORTING ---

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Account No   Type       Owner             Balance         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ACC001       Savings    Alice Johnson     $250.00         â•‘
â•‘ ACC002       Checking   Bob Smith         $5000.00        â•‘
â•‘ ACC003       Savings    Charlie Brown     $1000.00        â•‘
â•‘ ACC004       Checking   Zoe Williams      $750.00         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Accounts sorted by balance (descending)

--- AFTER SORTING (Descending by Balance) ---

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Account No   Type       Owner             Balance         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ACC002       Checking   Bob Smith         $5000.00        â•‘
â•‘ ACC003       Savings    Charlie Brown     $1000.00        â•‘
â•‘ ACC004       Checking   Zoe Williams      $750.00         â•‘
â•‘ ACC001       Savings    Alice Johnson     $250.00         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Accounts sorted successfully!
  Algorithm: Insertion Sort (Descending)
  Sorted By: Balance (High to Low)
```

**Data Transformation:**
```
BEFORE: [$250, $5000, $1000, $750]
AFTER:  [$5000, $1000, $750, $250]  â† Descending order
```

---

## Admin #19: View Audit Trail (Stack LIFO Display)

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Menu Number** | 19 |
| **Customer Menu Number** | N/A (Admin-only security feature) |
| **Menu Label** | "View Audit Trail" |
| **MenuAction Enum** | `VIEW_AUDIT_TRAIL` |
| **Handler Method** | `AuthenticationManager.handleViewAuditTrail()` |
| **Source File** | `src/com/banking/managers/AuthenticationManager.java:243-284` |
| **Access Restrictions** | Admin-only (security monitoring) |
| **Data Structure** | **Stack<AuditLog>** (LIFO display - newest first) |

---

### 2. Purpose and Functionality

**What it does:**
- Displays system audit trail (all logged actions)
- Uses **Stack data structure** for LIFO display (newest first)
- Shows timestamp, username, role, action, and details
- Supports filtering by action type (optional enhancement)
- Security monitoring for admins

**Why it exists:**
- Security monitoring (detect suspicious activity)
- Compliance (audit trail for financial systems)
- Troubleshooting (track system operations)
- Demonstrates Stack LIFO usage (newest logs shown first)

**Business Rules:**
- Only admins can view audit trail (security-sensitive data)
- Stack ensures newest logs appear first (most relevant for monitoring)
- All operations logged: login, create customer, transactions, etc.
- No deletion or modification of audit logs (immutable)

---

### 3. Step-by-Step Code Flow

#### Step 1-2: Selection & Permission
User selects option **19** (Admin-only).

#### Step 3: Input Collection
**Location:** No input required (displays all logs)

#### Step 4: Business Logic (Stack Iteration - LIFO)
**Location:** `AuthenticationManager.java:243-284`

```java
public void handleViewAuditTrail() {
    UIFormatter.printSectionHeader("AUDIT TRAIL (Newest First)");

    if (this.auditTrail.isEmpty()) {
        UIFormatter.printInfo("Audit trail is empty. No actions have been logged yet.");
        return;
    }

    System.out.println("\nğŸ“‹ Total Logs: " + this.auditTrail.size());
    System.out.println();

    // Display table header
    UIFormatter.printTableHeader("Timestamp", "Username", "Role", "Action", "Details");

    // Iterate Stack (LIFO - newest first)
    // Stack does not have built-in iterator, so we pop into temp stack
    Stack<AuditLog> tempStack = new Stack<>();

    // Pop all logs to temp stack (reverses order)
    while (!this.auditTrail.isEmpty()) {
        tempStack.push(this.auditTrail.pop());
    }

    // Display logs (now in LIFO order) and restore original stack
    while (!tempStack.isEmpty()) {
        AuditLog log = tempStack.pop();

        // Format timestamp
        String timestamp = log.getTimestamp().format(
            java.time.format.DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")
        );

        // Display row
        UIFormatter.printTableRow(
            timestamp,
            log.getUsername(),
            log.getRole().toString(),
            log.getAction(),
            log.getDetails()
        );

        // Restore to original stack
        this.auditTrail.push(log);
    }

    UIFormatter.printTableFooter();

    UIFormatter.printSuccessEnhanced(
        "Audit trail displayed successfully!",
        "Total Logs: " + this.auditTrail.size(),
        "Order: Newest â†’ Oldest (LIFO)"
    );
}
```

**Why LIFO (Stack)?**
- Security monitoring focuses on **recent activity**
- Most recent logs are most relevant for detecting issues
- Industry standard (system logs always show newest first)
- Efficient: O(1) push/pop operations

#### Step 5: Data Structure (Stack Operations)

**Stack Structure:**
```
Stack<AuditLog> auditTrail:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ AuditLog[5] â† TOP (newest)              â”‚
  â”‚ 2025-12-04 15:30:22 | admin | DEPOSIT   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ AuditLog[4]                             â”‚
  â”‚ 2025-12-04 15:28:10 | alice | WITHDRAW  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ AuditLog[3]                             â”‚
  â”‚ 2025-12-04 15:25:00 | admin | CREATE_ACCâ”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ AuditLog[2]                             â”‚
  â”‚ 2025-12-04 15:20:45 | alice | LOGIN_OK  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ AuditLog[1] â† BOTTOM (oldest)           â”‚
  â”‚ 2025-12-04 15:15:00 | admin | LOGIN_OK  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Display Order (LIFO - Newest First):**
```
Row 1: 2025-12-04 15:30:22 | admin | DEPOSIT       â† Newest
Row 2: 2025-12-04 15:28:10 | alice | WITHDRAW
Row 3: 2025-12-04 15:25:00 | admin | CREATE_ACC
Row 4: 2025-12-04 15:20:45 | alice | LOGIN_OK
Row 5: 2025-12-04 15:15:00 | admin | LOGIN_OK      â† Oldest
```

#### Step 6-7: Feedback & Audit
No logging for viewing audit trail (would create infinite recursion).

---

### 4. Code Snippets

#### Log Action Method (Add to Stack)

**File:** `AuthenticationManager.java:107-124`

```java
public void logAction(String username, UserRole role, String action, String details) {
    try {
        AuditLog log = new AuditLog(
            LocalDateTime.now(),                         // Current timestamp
            username == null ? "SYSTEM" : username,      // Username or SYSTEM
            role == null ? UserRole.ADMIN : role,        // Role (default ADMIN)
            action,                                      // Action type (e.g., "LOGIN_SUCCESS")
            details                                      // Additional details
        );

        // STACK OPERATION: Push to top (O(1) complexity)
        this.auditTrail.push(log);

    } catch (IllegalArgumentException e) {
        System.err.println("âš  Failed to log action: " + e.getMessage());
    }
}
```

**Called throughout the system:**
```java
// In AuthenticationManager.java (login method)
logAction(username, foundUser.getUserRole(), "LOGIN_SUCCESS", "User logged in successfully");

// In CustomerManager.java (create customer)
InputValidator.safeLogAction(bankingSystem, "CREATE_CUSTOMER", "Customer ID: " + custId);

// In TransactionProcessor.java (deposit)
InputValidator.safeLogAction(bankingSystem, "DEPOSIT", "Account: " + accountNo + " Amount: $" + amount);
```

#### AuditLog Class

**File:** `src/com/banking/security/AuditLog.java`

```java
public class AuditLog {
    private final LocalDateTime timestamp;  // When action occurred
    private final String username;          // Who performed action
    private final UserRole role;            // User's role (ADMIN/CUSTOMER)
    private final String action;            // Action type (e.g., "DEPOSIT")
    private final String details;           // Additional context

    public AuditLog(LocalDateTime timestamp, String username, UserRole role,
                   String action, String details) {
        if (timestamp == null || username == null || role == null ||
            action == null || details == null) {
            throw new IllegalArgumentException("All audit log fields must be non-null");
        }

        this.timestamp = timestamp;
        this.username = username;
        this.role = role;
        this.action = action;
        this.details = details;
    }

    // Getters only (IMMUTABLE - no setters)
    public LocalDateTime getTimestamp() { return timestamp; }
    public String getUsername() { return username; }
    public UserRole getRole() { return role; }
    public String getAction() { return action; }
    public String getDetails() { return details; }

    @Override
    public String toString() {
        return String.format("[%s] %s (%s) - %s: %s",
            timestamp.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")),
            username,
            role,
            action,
            details
        );
    }
}
```

**Immutability:** No setters â†’ audit logs cannot be modified after creation (security feature).

---

### 5. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     VIEW AUDIT TRAIL FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin selects option 19
    â”‚
    â”œâ”€â”€â†’ Check: auditTrail.isEmpty()?
    â”‚         â”œâ”€â”€â†’ YES: Display "Audit trail is empty"
    â”‚         â””â”€â”€â†’ NO: Continue
    â”‚
    â”œâ”€â”€â†’ Display table header
    â”‚
    â”œâ”€â”€â†’ Iterate Stack (LIFO)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Create temp stack
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Pop all logs to temp stack (reverse order)
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ while (!auditTrail.isEmpty()):
    â”‚         â”‚                   tempStack.push(auditTrail.pop())
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ Display and restore logs
    â”‚                   â”‚
    â”‚                   â””â”€â”€â†’ while (!tempStack.isEmpty()):
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â†’ log = tempStack.pop()
    â”‚                             â”œâ”€â”€â†’ Display log details
    â”‚                             â””â”€â”€â†’ auditTrail.push(log)  â† Restore
    â”‚
    â”œâ”€â”€â†’ Display table footer
    â”‚
    â””â”€â”€â†’ Display success message
```

---

### 6. Example Usage

#### Scenario 1: View Audit Trail (Multiple Logs)

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ AUDIT TRAIL (Newest First)         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Total Logs: 8

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Timestamp           Username   Role      Action             Details                                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ 2025-12-04 16:45:30 admin      ADMIN     DEPOSIT            Account: ACC001 Amount: $500                    â•‘
â•‘ 2025-12-04 16:40:15 alice      CUSTOMER  WITHDRAW           Account: ACC002 Amount: $200                    â•‘
â•‘ 2025-12-04 16:35:00 admin      ADMIN     CREATE_ACCOUNT     Account ID: ACC005 Type: SAVINGS                â•‘
â•‘ 2025-12-04 16:30:22 admin      ADMIN     CREATE_CUSTOMER    Customer ID: C003 Name: Charlie Brown           â•‘
â•‘ 2025-12-04 16:25:10 bob        CUSTOMER  TRANSFER           From: ACC003 To: ACC004 Amount: $100            â•‘
â•‘ 2025-12-04 16:20:45 alice      CUSTOMER  LOGIN_SUCCESS      User logged in successfully                     â•‘
â•‘ 2025-12-04 16:15:00 admin      ADMIN     LOGIN_SUCCESS      User logged in successfully                     â•‘
â•‘ 2025-12-04 16:10:30 hacker     SYSTEM    LOGIN_FAILED       Invalid credentials for: hacker                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Audit trail displayed successfully!
  Total Logs: 8
  Order: Newest â†’ Oldest (LIFO)
```

**Stack Operations:**
```
Original Stack (TOP â†’ BOTTOM):
  [DEPOSIT, WITHDRAW, CREATE_ACCOUNT, CREATE_CUSTOMER, TRANSFER, LOGIN_OK(alice), LOGIN_OK(admin), LOGIN_FAILED]

Display Order (LIFO - Newest First):
  Row 1: DEPOSIT           â† TOP (newest)
  Row 2: WITHDRAW
  Row 3: CREATE_ACCOUNT
  Row 4: CREATE_CUSTOMER
  Row 5: TRANSFER
  Row 6: LOGIN_OK (alice)
  Row 7: LOGIN_OK (admin)
  Row 8: LOGIN_FAILED      â† BOTTOM (oldest)
```

---

#### Scenario 2: Empty Audit Trail

**Console Input/Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ AUDIT TRAIL (Newest First)         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ Audit trail is empty. No actions have been logged yet.
```

---

## Related Documentation

- **[6-Menu-Overview.md](6-Menu-Overview.md)** - Complete menu architecture
- **[2-Data-Structures.md](2-Data-Structures.md)** - LinkedList, Stack, algorithm analysis
- **[1-OOP-Analysis.md](1-OOP-Analysis.md)** - One-to-One relationship (Customer â†” Profile)
- **[5-Security-Features.md](5-Security-Features.md)** - Audit logging architecture

---

**â† Back to:** [Transaction Operations](6.4-Transaction-Ops.md) | **Next:** [Security & Session Management â†’](6.6-Security-Session.md)
