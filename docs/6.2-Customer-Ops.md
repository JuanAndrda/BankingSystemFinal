# Banking System - Customer Operations Documentation

**Project:** Banking Management System Final Project
**Courses:** CIT 207 & CC 204
**Document:** Customer Operations (Admin #1-4)
**Date:** December 2025

---

## ğŸ“‘ Navigation

**â† Back to:** [Login](6.1-Login.md) | **Up to:** [Menu Overview](6-Menu-Overview.md) | **Next:** [Account Operations â†’](6.3-Account-Ops.md)

**Menu Documentation Index:**
- [6-Menu-Overview.md](6-Menu-Overview.md) - Architecture and summary tables
- [6.1-Login.md](6.1-Login.md) - Login Screen
- **6.2-Customer-Ops.md** - â† You are here
- [6.3-Account-Ops.md](6.3-Account-Ops.md) - Account Operations (Admin #5-9)
- [6.4-Transaction-Ops.md](6.4-Transaction-Ops.md) - Transaction Operations (Admin #10-13, Customer #2-5)
- [6.5-Profile-Reports.md](6.5-Profile-Reports.md) - Profile & Reports (Admin #14-19)
- [6.6-Security-Session.md](6.6-Security-Session.md) - Security & Session (Admin #21, #0, #20)

---

## Overview

This document covers the **Customer Operations** category - 4 admin-only menu options for managing customers in the Banking System. These operations provide full CRUD (Create, Read, Update, Delete) functionality for the Customer entity.

### Customer Operations Summary

| Admin # | Option Name | Handler | Access | Purpose |
|---------|-------------|---------|--------|---------|
| **1** | Create Customer | `CustomerManager.handleCreateCustomer()` | Admin Only | Add new customers with integrated onboarding |
| **2** | View Customer Details | `CustomerManager.handleViewCustomerDetails()` | Admin Only | Display customer info, profile, and accounts |
| **3** | View All Customers | `CustomerManager.handleViewAllCustomers()` | Admin Only | List all customers in table format |
| **4** | Delete Customer | `CustomerManager.handleDeleteCustomer()` | Admin Only | Remove customer with cascade delete |

**Category:** CUSTOMER_OPERATIONS
**Required Role:** ADMIN
**Customer Access:** None (admin-only operations)

---

## [Admin #1] Create Customer

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Number** | 1 |
| **Customer Number** | N/A (Admin Only) |
| **Category** | CUSTOMER_OPERATIONS |
| **Display Name** | "Create Customer" |
| **Handler Method** | `CustomerManager.handleCreateCustomer()` |
| **Source File** | `src/com/banking/managers/CustomerManager.java:270-386` |
| **Access Control** | ADMIN only |
| **Required Permission** | CREATE_CUSTOMER |

### 2. Purpose and Functionality

Creates a new customer in the system with auto-generated ID and integrated onboarding workflow.

**What it does:**
- Auto-generates sequential customer ID (C001, C002, C003...)
- Collects customer name
- **Optional:** Creates customer profile (address, phone, email)
- **Optional:** Creates bank account (linked to customer)
- **Optional:** Creates login credentials for customer
- Adds customer to system `LinkedList<Customer>`
- Logs action to audit trail

**Why use this:**
- First step in customer lifecycle
- Integrated onboarding (create customer, profile, account, login in one flow)
- Ensures unique customer IDs
- Establishes one-to-one (customer â†” profile) and one-to-many (customer â†’ accounts) relationships

### 3. Step-by-Step Code Flow

#### Step 1: Menu Selection

**Location:** `BankingSystem.java:302-412` (switch statement)

User selects option 1 from Admin Menu â†’ Routes to `CREATE_CUSTOMER` case â†’ Calls `customerMgr.handleCreateCustomer()`

#### Step 2: Permission Check

**Location:** `BankingSystem.java:127-185` (menu display)

MenuAction filter ensures only admins see this option:
```java
CREATE_CUSTOMER("Create Customer", 1, -1, UserRole.ADMIN, MenuCategory.CUSTOMER_OPERATIONS)
//                                      â†‘   â†‘    â†‘
//                               Admin# Cust# AdminOnly
```

Customer users never see this in their menu (customerMenuNumber = -1).

#### Step 3: Input Collection - Customer ID & Name

**Location:** `CustomerManager.java:270-290`

```java
UIFormatter.printSectionHeader("CREATE CUSTOMER");

// Step 1: Auto-generate Customer ID
String custId = this.generateNextCustomerId();  // C001, C002, C003...
UIFormatter.printSuccess("Customer ID auto-generated: " + custId);

// Step 2: Get customer name
String custName = this.validator.getValidatedString("Customer Name");
if (custName == null) return;  // User cancelled
```

**Auto-ID Generation Algorithm:**
```java
public String generateNextCustomerId() {
    int maxId = 0;
    for (Customer c : this.customers) {  // LinkedList iteration
        String id = c.getCustomerId();
        if (id.startsWith("C") && id.length() == 4) {
            int num = Integer.parseInt(id.substring(1));  // Extract number
            if (num > maxId) maxId = num;
        }
    }
    return "C" + String.format("%03d", maxId + 1);  // C001, C002...
}
```

**Data Structure:** `LinkedList<Customer> customers`
**Algorithm:** Linear search to find max ID, then increment
**Time Complexity:** O(n)

#### Step 4: Business Logic - Create Customer Object

**Location:** `CustomerManager.java:291-310`

```java
// Step 3: Create Customer object
Customer newCustomer = this.createCustomer(custId, custName);
if (newCustomer == null) {
    UIFormatter.printError("Failed to create customer. Please try again.");
    return;
}
```

**Core CRUD Method:**
```java
public Customer createCustomer(String customerId, String name) {
    // Check for duplicate customer ID
    if (this.validateCustomerExists(customerId)) {
        UIFormatter.printError("Customer ID already exists: " + customerId);
        return null;
    }

    try {
        Customer c = new Customer(customerId, name);  // Constructor validates
        this.customers.add(c);  // Add to LinkedList
        UIFormatter.printSuccess("Customer created: " + c);
        return c;
    } catch (IllegalArgumentException e) {
        UIFormatter.printError("Error creating customer: " + e.getMessage());
        return null;
    }
}
```

**Validation in Constructor:**
```java
// Customer.java constructor
public Customer(String customerId, String name) {
    if (customerId == null || customerId.trim().isEmpty()) {
        throw new IllegalArgumentException("Customer ID cannot be empty");
    }
    if (name == null || name.trim().isEmpty()) {
        throw new IllegalArgumentException("Name cannot be empty");
    }
    this.customerId = customerId.trim();
    this.name = name.trim();
    this.dateCreated = LocalDateTime.now();
    this.accounts = new LinkedList<>();  // Initialize empty account list
    this.profile = null;  // No profile yet
}
```

#### Step 5: Data Updates - Optional Login Account Creation

**Location:** `CustomerManager.java:312-340`

```java
// Step 4-5: Optional login account creation
boolean loginCreated = false;
if (this.validator.confirmAction("Create login account for this customer?")) {
    String username = this.validator.getValidatedString("Username");
    if (username != null) {
        // Delegate to AuthenticationManager
        String tempPassword = this.authManager.registerUser(
            username,
            UserRole.CUSTOMER,
            custId  // Link to customer
        );

        if (tempPassword != null) {
            loginCreated = true;
            System.out.println("\nâœ“ Login credentials created!");
            UIFormatter.printDataRow("  Username:", username);
            UIFormatter.printDataRow("  Temporary Password:", tempPassword);
            UIFormatter.printInfo("Customer must change password on first login.");
        }
    }
}
```

**User Registry Update:**
```java
// AuthenticationManager.java
public String registerUser(String username, UserRole role, String customerId) {
    // Check uniqueness
    for (User u : userRegistry) {  // LinkedList<User>
        if (u.getUsername().equals(username)) {
            return null;  // Duplicate
        }
    }

    String tempPassword = generateTemporaryPassword(username);
    User newUser = new UserAccount(username, tempPassword, role, customerId);
    newUser.setPasswordChangeRequired(true);  // Force change on first login
    userRegistry.add(newUser);  // Add to LinkedList

    logAction(username, role, "USER_REGISTERED", "Customer ID: " + customerId);
    return tempPassword;
}
```

**Data Structures Updated:**
1. `LinkedList<Customer> customers` - new customer added
2. `LinkedList<User> userRegistry` - new user added (if login created)

#### Step 6: Feedback Display - Integrated Onboarding

**Location:** `CustomerManager.java:362-386`

```java
// Step 7-10: Integrated Onboarding Workflow
boolean profileCreated = this.promptAndCreateProfile(newCustomer);

boolean accountCreated = false;
if (profileCreated) {
    accountCreated = this.promptAndCreateAccount(newCustomer);
}

// Display Onboarding Summary
UIFormatter.printBlankLine();
UIFormatter.printBoxTitle("ONBOARDING COMPLETE");
System.out.println();
UIFormatter.printBulletLine("Customer: " + custName + " (" + custId + ")");
if (profileCreated) {
    String profileId = newCustomer.getProfile() != null ?
                       newCustomer.getProfile().getProfileId() : "N/A";
    UIFormatter.printBulletLine("Profile: " + profileId + " âœ“ CREATED");
} else {
    UIFormatter.printBulletLine("Profile: SKIPPED");
}
if (accountCreated) {
    UIFormatter.printBulletLine("Account: CREATED âœ“");
} else {
    UIFormatter.printBulletLine("Account: NOT CREATED (Optional)");
}
System.out.println("\nCustomer is ready to use the banking system!\n");
```

#### Step 7: Audit Logging

**Location:** `CustomerManager.java:358` (within handleCreateCustomer)

```java
InputValidator.safeLogAction(bankingSystem, "CREATE_CUSTOMER",
    "Customer ID: " + custId + " Name: " + custName + " Username: " + username);
```

**Audit Trail Update:**
```java
// Delegates to AuthenticationManager
auditTrail.push(new AuditLog(
    LocalDateTime.now(),
    currentUser.getUsername(),
    currentUser.getUserRole(),
    "CREATE_CUSTOMER",
    "Customer ID: C001 Name: John Doe Username: johndoe"
));
```

**Data Structure:** `Stack<AuditLog> auditTrail`
**Operation:** Push (LIFO - newest first)

### 4. Code Snippets

**MenuAction Enum Definition:**

**File:** `src/com/banking/MenuAction.java:29`

```java
CREATE_CUSTOMER("Create Customer", 1, -1, UserRole.ADMIN, MenuCategory.CUSTOMER_OPERATIONS),
//               Display Name      â†‘   â†‘   Admin-only     Category
//                             Admin Cust
```

**Handler Method (Simplified):**

**File:** `src/com/banking/managers/CustomerManager.java:270-386`

```java
public void handleCreateCustomer() {
    UIFormatter.printSectionHeader("CREATE CUSTOMER");

    // Auto-generate ID (C001, C002...)
    String custId = this.generateNextCustomerId();
    UIFormatter.printSuccess("Customer ID auto-generated: " + custId);

    // Get customer name
    String custName = this.validator.getValidatedString("Customer Name");
    if (custName == null) return;

    // Create customer object and add to LinkedList
    Customer newCustomer = this.createCustomer(custId, custName);
    if (newCustomer == null) return;

    // Optional: Create login credentials
    boolean loginCreated = false;
    if (this.validator.confirmAction("Create login account for this customer?")) {
        String username = this.validator.getValidatedString("Username");
        if (username != null) {
            String tempPassword = this.authManager.registerUser(username,
                UserRole.CUSTOMER, custId);
            if (tempPassword != null) {
                loginCreated = true;
                // Display credentials...
            }
        }
    }

    // Log action
    String usernameStr = loginCreated ? username : "N/A";
    InputValidator.safeLogAction(bankingSystem, "CREATE_CUSTOMER",
        "Customer ID: " + custId + " Name: " + custName + " Username: " + usernameStr);

    // Integrated onboarding (profile + account creation)
    boolean profileCreated = this.promptAndCreateProfile(newCustomer);
    boolean accountCreated = false;
    if (profileCreated) {
        accountCreated = this.promptAndCreateAccount(newCustomer);
    }

    // Display summary...
}
```

**Data Structure Operations:**

```java
// LinkedList<Customer> - Add operation
this.customers.add(newCustomer);  // O(1) - append to end

// LinkedList<User> - Add operation
userRegistry.add(newUser);  // O(1) - append to end

// Stack<AuditLog> - Push operation
auditTrail.push(new AuditLog(...));  // O(1) - LIFO
```

### 5. Data Flow Diagram

```
User Input (Admin selects option 1)
    â”‚
    â”œâ”€â”€â†’ BankingSystem.runConsoleMenu()
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ MenuAction.fromMenuNumber(1, ADMIN) â†’ CREATE_CUSTOMER
    â”‚
    â”œâ”€â”€â†’ CustomerManager.handleCreateCustomer()
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Auto-generate ID: C001, C002, C003...
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ Iterate LinkedList<Customer> (find max ID)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Get customer name (InputValidator)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ createCustomer(id, name)
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â†’ new Customer(id, name)
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â””â”€â”€â†’ Validate in constructor
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ customers.add(customer)  [LinkedList]
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Optional: Create login account
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ AuthenticationManager.registerUser()
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â””â”€â”€â†’ userRegistry.add(user)  [LinkedList]
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Optional: Create profile (promptAndCreateProfile)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Optional: Create account (promptAndCreateAccount)
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ Display onboarding summary
    â”‚
    â”œâ”€â”€â†’ Log to Stack<AuditLog>
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ auditTrail.push(log)
    â”‚
    â””â”€â”€â†’ Return to menu
```

### 6. Example Usage

**Scenario 1: Full Onboarding (Customer + Profile + Account + Login)**

**Console Input/Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREATE CUSTOMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Customer ID auto-generated: C003

â†’ Customer Name: Alice Johnson
âœ“ Customer created: Customer{id='C003', name='Alice Johnson'}

â†’ Create login account for this customer? (yes/no): yes
â†’ Username: alice

âœ“ Login credentials created!
  Username:           alice
  Temporary Password: Welcomeal4582
â„¹ Customer must change password on first login.

â†’ Create profile for Alice Johnson? (yes/no): yes
âœ“ Profile ID auto-generated: P003

â†’ Address: 123 Main St, Springfield
â†’ Phone: 555-1234
â†’ Email: alice@example.com
âœ“ Profile created/updated for customer: Alice Johnson
â„¹ One-to-one relationship successfully established!

â†’ Create an account for Alice Johnson? (yes/no): yes
â†’ Account Type (SAVINGS/CHECKING): SAVINGS
âœ“ Account number auto-generated: ACC003

â†’ Initial Deposit Amount: 500
âœ“ Account created: [ACC003] Savings Account | Owner: C003 | Balance: $500.00

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ONBOARDING COMPLETE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Customer: Alice Johnson (C003)
â€¢ Profile: P003 âœ“ CREATED
â€¢ Account: CREATED âœ“

Customer is ready to use the banking system!
```

**Data After:**
```java
customers (LinkedList):
  Customer{id='C003', name='Alice Johnson', dateCreated=2025-12-04T15:30:00,
           profile=CustomerProfile{P003}, accounts=[ACC003]}

userRegistry (LinkedList):
  UserAccount{username='alice', role=CUSTOMER, customerId='C003',
              passwordChangeRequired=true}

auditTrail (Stack - top entry):
  AuditLog{timestamp=2025-12-04T15:30:15, username='admin', role=ADMIN,
           action='CREATE_CUSTOMER',
           details='Customer ID: C003 Name: Alice Johnson Username: alice'}
```

---

**Scenario 2: Minimal Creation (Customer Only, No Profile/Account/Login)**

**Console Input/Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREATE CUSTOMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Customer ID auto-generated: C004

â†’ Customer Name: Bob Smith
âœ“ Customer created: Customer{id='C004', name='Bob Smith'}

â†’ Create login account for this customer? (yes/no): no

â†’ Create profile for Bob Smith? (yes/no): no

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ONBOARDING COMPLETE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Customer: Bob Smith (C004)
â€¢ Profile: SKIPPED
â€¢ Account: NOT CREATED (Optional)

Customer is ready to use the banking system!
```

**Data After:**
```java
customers (LinkedList):
  Customer{id='C004', name='Bob Smith', dateCreated=2025-12-04T15:32:00,
           profile=null, accounts=[]}

userRegistry (LinkedList):
  // No new entry

auditTrail (Stack - top entry):
  AuditLog{timestamp=2025-12-04T15:32:05, username='admin', role=ADMIN,
           action='CREATE_CUSTOMER',
           details='Customer ID: C004 Name: Bob Smith Username: N/A'}
```

---

**Scenario 3: Error - Empty Name**

**Console Input/Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREATE CUSTOMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Customer ID auto-generated: C005

â†’ Customer Name:
âœ— Invalid input: Value cannot be empty.
   Please enter a valid value.

â†’ Customer Name: (user types 'cancel')
â„¹ Operation cancelled.
```

**Data After:**
```java
// No changes - customer was not created
customers.size() remains unchanged
```

---

## [Admin #2] View Customer Details

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Number** | 2 |
| **Customer Number** | N/A (Admin Only) |
| **Category** | CUSTOMER_OPERATIONS |
| **Display Name** | "View Customer Details" |
| **Handler Method** | `CustomerManager.handleViewCustomerDetails()` |
| **Source File** | `src/com/banking/managers/CustomerManager.java:388-434` |
| **Access Control** | ADMIN only |
| **Required Permission** | VIEW_CUSTOMER_DETAILS |

### 2. Purpose and Functionality

Displays comprehensive information about a specific customer including profile and all associated accounts.

**What it does:**
- Prompts for customer ID
- Searches `LinkedList<Customer>` for matching customer
- Displays customer information in professional box format
- Shows associated profile (if exists)
- Lists all customer accounts with balances
- Demonstrates one-to-one (customer â†” profile) and one-to-many (customer â†’ accounts) relationships

**Why use this:**
- Verify customer information
- Review customer profile and accounts
- Check relationship integrity
- Customer service inquiries

### 3. Step-by-Step Code Flow

#### Step 1: Menu Selection

User selects option 2 â†’ Routes to `VIEW_CUSTOMER_DETAILS` case â†’ Calls `customerMgr.handleViewCustomerDetails()`

#### Step 2: Permission Check

Same as Admin #1 - menu filtered by role.

#### Step 3: Input Collection - Customer ID

**Location:** `CustomerManager.java:388-393`

```java
UIFormatter.printSectionHeader("VIEW CUSTOMER DETAILS");

Customer customer = this.validator.getValidatedCustomer(
    "âœ— Customer not found. Please check the Customer ID.");
if (customer == null) return;  // Not found or user cancelled
```

**Validation Method:**
```java
// InputValidator.java
public Customer getValidatedCustomer(String notFoundMessage) {
    while (true) {  // RETRY LOOP
        String custId = getValidatedInput("Customer ID:",
            ValidationPatterns.CUSTOMER_ID_PATTERN,
            "(format: " + ValidationPatterns.CUSTOMER_ID_FORMAT + " e.g., C001)");

        if (custId == null) return null;  // User cancelled

        Customer customer = customerMgr.findCustomer(custId);
        if (customer != null) {
            return customer;  // Found!
        }

        UIFormatter.printError(notFoundMessage);
        if (!confirmAction("Try again?")) {
            return null;  // User chose not to retry
        }
        // Loop continues - retry
    }
}
```

**Search Algorithm:**
```java
public Customer findCustomer(String customerId) {
    for (Customer c : this.customers) {  // LinkedList iteration
        if (c.getCustomerId().equals(customerId)) {
            return c;  // Found
        }
    }
    return null;  // Not found
}
```

**Time Complexity:** O(n) - linear search

#### Step 4: Business Logic - Retrieve Customer Data

**Location:** `CustomerManager.java:395-428`

Customer object already retrieved in Step 3. Now extract related data:

```java
// Get profile (one-to-one relationship)
CustomerProfile profile = customer.getProfile();

// Get accounts (one-to-many relationship)
LinkedList<Account> accounts = customer.getAccounts();
```

**Relationships:**
```java
// Customer.java
private CustomerProfile profile;  // One-to-one (can be null)
private LinkedList<Account> accounts;  // One-to-many (never null, can be empty)

public CustomerProfile getProfile() {
    return this.profile;
}

public LinkedList<Account> getAccounts() {
    return this.accounts;  // Returns the LinkedList (encapsulation)
}
```

#### Step 5: Data Updates

No data updates - this is a READ operation.

#### Step 6: Feedback Display - Professional Box Format

**Location:** `CustomerManager.java:396-433`

```java
// Professional box format for customer details
System.out.println();
UIFormatter.printTopBorder();
UIFormatter.printCenteredLine("CUSTOMER INFORMATION");
UIFormatter.printMiddleBorder();

UIFormatter.printLeftAlignedLine("  Customer ID:        " + customer.getCustomerId(), 0);
UIFormatter.printLeftAlignedLine("  Name:               " + customer.getName(), 0);

// Profile information (one-to-one)
CustomerProfile profile = customer.getProfile();
if (profile != null) {
    UIFormatter.printLeftAlignedLine("  Address:            " + profile.getAddress(), 0);
    UIFormatter.printLeftAlignedLine("  Phone:              " + profile.getPhone(), 0);
    UIFormatter.printLeftAlignedLine("  Email:              " + profile.getEmail(), 0);
} else {
    UIFormatter.printLeftAlignedLine("  Profile:            Not created", 0);
}

UIFormatter.printMiddleBorder();
UIFormatter.printLeftAlignedLine("ASSOCIATED ACCOUNTS", 2);
UIFormatter.printMiddleBorder();

// List all accounts (one-to-many)
LinkedList<Account> accounts = customer.getAccounts();
if (accounts.isEmpty()) {
    UIFormatter.printLeftAlignedLine("  No accounts. Use option 5 (Create Account) to add one.", 2);
} else {
    for (Account acc : accounts) {  // LinkedList iteration
        String accInfo = String.format("  %s %s (%s) - Balance: $%.2f",
            UIFormatter.BULLET,
            acc.getAccountNo(),
            acc instanceof SavingsAccount ? "Savings" : "Checking",  // Polymorphism!
            acc.getBalance());
        UIFormatter.printLeftAlignedLine(accInfo, 0);
    }
}

UIFormatter.printBottomBorder();
System.out.println();
```

**Polymorphism Example:**
```java
acc instanceof SavingsAccount ? "Savings" : "Checking"
```

At runtime, `acc` can be either `SavingsAccount` or `CheckingAccount` (both extend `Account`). The `instanceof` operator checks the actual type.

#### Step 7: Audit Logging

No explicit audit log for read operations (reduces log noise). Could be added if compliance requires it.

### 4. Code Snippets

**MenuAction Enum:**
```java
VIEW_CUSTOMER_DETAILS("View Customer Details", 2, -1, UserRole.ADMIN, MenuCategory.CUSTOMER_OPERATIONS)
```

**Handler Method:**

**File:** `src/com/banking/managers/CustomerManager.java:388-434`

```java
public void handleViewCustomerDetails() {
    UIFormatter.printSectionHeader("VIEW CUSTOMER DETAILS");

    Customer customer = this.validator.getValidatedCustomer(
        "âœ— Customer not found. Please check the Customer ID.");
    if (customer == null) return;

    // Professional box format
    System.out.println();
    UIFormatter.printTopBorder();
    UIFormatter.printCenteredLine("CUSTOMER INFORMATION");
    UIFormatter.printMiddleBorder();

    // Basic info
    UIFormatter.printLeftAlignedLine("  Customer ID:        " + customer.getCustomerId(), 0);
    UIFormatter.printLeftAlignedLine("  Name:               " + customer.getName(), 0);

    // Profile (one-to-one)
    CustomerProfile profile = customer.getProfile();
    if (profile != null) {
        UIFormatter.printLeftAlignedLine("  Address:            " + profile.getAddress(), 0);
        UIFormatter.printLeftAlignedLine("  Phone:              " + profile.getPhone(), 0);
        UIFormatter.printLeftAlignedLine("  Email:              " + profile.getEmail(), 0);
    } else {
        UIFormatter.printLeftAlignedLine("  Profile:            Not created", 0);
    }

    // Accounts (one-to-many)
    UIFormatter.printMiddleBorder();
    UIFormatter.printLeftAlignedLine("ASSOCIATED ACCOUNTS", 2);
    UIFormatter.printMiddleBorder();

    LinkedList<Account> accounts = customer.getAccounts();
    if (accounts.isEmpty()) {
        UIFormatter.printLeftAlignedLine("  No accounts.", 2);
    } else {
        for (Account acc : accounts) {
            String type = acc instanceof SavingsAccount ? "Savings" : "Checking";
            String info = String.format("  â€¢ %s (%s) - Balance: $%.2f",
                acc.getAccountNo(), type, acc.getBalance());
            UIFormatter.printLeftAlignedLine(info, 0);
        }
    }

    UIFormatter.printBottomBorder();
}
```

**Data Structure Access:**

```java
// LinkedList<Customer> - Linear search
for (Customer c : this.customers) {
    if (c.getCustomerId().equals(customerId)) {
        return c;  // O(n)
    }
}

// LinkedList<Account> - Iteration for display
for (Account acc : customer.getAccounts()) {
    // Display each account - O(m) where m = # accounts per customer
}
```

### 5. Data Flow Diagram

```
User Input (Admin selects option 2)
    â”‚
    â”œâ”€â”€â†’ CustomerManager.handleViewCustomerDetails()
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ InputValidator.getValidatedCustomer()
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â†’ Get Customer ID (with validation)
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ CustomerManager.findCustomer(id)
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â””â”€â”€â†’ Iterate LinkedList<Customer>
    â”‚         â”‚                             â”‚
    â”‚         â”‚                             â””â”€â”€â†’ Return Customer or null
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Customer found â†’ Extract data
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â†’ customer.getCustomerId()
    â”‚         â”‚         â”œâ”€â”€â†’ customer.getName()
    â”‚         â”‚         â”œâ”€â”€â†’ customer.getProfile() [One-to-One]
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â””â”€â”€â†’ If not null: address, phone, email
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ customer.getAccounts() [One-to-Many]
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â””â”€â”€â†’ LinkedList<Account>
    â”‚         â”‚                             â”‚
    â”‚         â”‚                             â””â”€â”€â†’ Iterate and display all
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ UIFormatter.print...() [Professional box format]
    â”‚
    â””â”€â”€â†’ Return to menu (no data changes)
```

### 6. Example Usage

**Scenario 1: Customer with Profile and Accounts**

**Console Input:**
```
â†’ Customer ID: C003
```

**Console Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW CUSTOMER DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    CUSTOMER INFORMATION            â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
  Customer ID:        C003
  Name:               Alice Johnson
  Address:            123 Main St, Springfield
  Phone:              555-1234
  Email:              alice@example.com
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
  ASSOCIATED ACCOUNTS
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
  â€¢ ACC003 (Savings) - Balance: $500.00
  â€¢ ACC007 (Checking) - Balance: $1200.50
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**Scenario 2: Customer with No Profile or Accounts**

**Console Input:**
```
â†’ Customer ID: C004
```

**Console Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    CUSTOMER INFORMATION            â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
  Customer ID:        C004
  Name:               Bob Smith
  Profile:            Not created
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
  ASSOCIATED ACCOUNTS
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
  No accounts. Use option 5 (Create Account) to add one.
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**Scenario 3: Error - Customer Not Found**

**Console Input/Output:**
```
â†’ Customer ID: C999
âœ— Customer not found. Please check the Customer ID.
â†’ Try again? (yes/no): no
â„¹ Operation cancelled.
```

---

## [Admin #3] View All Customers

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Number** | 3 |
| **Customer Number** | N/A (Admin Only) |
| **Category** | CUSTOMER_OPERATIONS |
| **Display Name** | "View All Customers" |
| **Handler Method** | `CustomerManager.handleViewAllCustomers()` |
| **Source File** | `src/com/banking/managers/CustomerManager.java:436-467` |
| **Access Control** | ADMIN only |
| **Required Permission** | VIEW_ALL_CUSTOMERS |

### 2. Purpose and Functionality

Displays a summary table of all customers in the system with account count and total balance.

**What it does:**
- Iterates through entire `LinkedList<Customer>`
- Displays professional table format
- Shows customer ID, name, account count, and total balance
- Aggregates balance across all customer accounts

**Why use this:**
- Get overview of all customers
- Quick reference for customer IDs
- See system usage (who has accounts, balances)
- Useful before Create/Delete/View operations

### 3. Step-by-Step Code Flow

#### Steps 1-2: Menu Selection & Permission Check

Same as previous operations.

#### Step 3: Input Collection

No input required - displays all customers.

#### Step 4: Business Logic - Iterate All Customers

**Location:** `CustomerManager.java:436-466`

```java
UIFormatter.printSectionHeader("VIEW ALL CUSTOMERS");

if (this.customers.isEmpty()) {
    UIFormatter.printInfo("No customers found. Use option 1 (Create Customer) to add one.");
    return;
}

System.out.println("\nTotal Customers: " + this.customers.size());
System.out.println();

// Professional table format
UIFormatter.printTableHeader("Customer ID", "Name", "Accounts", "Total Balance");

for (Customer customer : this.customers) {  // LinkedList iteration
    String customerId = customer.getCustomerId();
    String name = customer.getName();
    String accountCount = String.valueOf(customer.getAccounts().size());

    // Calculate total balance across all accounts (one-to-many aggregation)
    double totalBalance = 0.0;
    for (Account acc : customer.getAccounts()) {
        totalBalance += acc.getBalance();
    }
    String balance = "$" + String.format("%.2f", totalBalance);

    UIFormatter.printTableRow(customerId, name, accountCount, balance);
}

UIFormatter.printTableFooter();
```

**Algorithm Analysis:**
- **Outer Loop:** Iterate all customers - O(n)
- **Inner Loop:** For each customer, iterate their accounts - O(m)
- **Total:** O(n * m) where n = customers, m = avg accounts per customer
- **Typical Case:** If each customer has 1-3 accounts, this is ~O(3n) = O(n)

#### Step 5: Data Updates

None - READ operation only.

#### Step 6: Feedback Display

Table format displayed as part of Step 4 (business logic).

#### Step 7: Audit Logging

Not logged (read operation).

### 4. Code Snippets

**Full Handler Method:**

**File:** `src/com/banking/managers/CustomerManager.java:436-467`

```java
public void handleViewAllCustomers() {
    UIFormatter.printSectionHeader("VIEW ALL CUSTOMERS");

    if (this.customers.isEmpty()) {
        UIFormatter.printInfo("No customers found. Use option 1 (Create Customer) to add one.");
        return;
    }

    System.out.println("\nTotal Customers: " + this.customers.size());
    System.out.println();

    // Professional table format
    UIFormatter.printTableHeader("Customer ID", "Name", "Accounts", "Total Balance");

    for (Customer customer : this.customers) {
        String customerId = customer.getCustomerId();
        String name = customer.getName();
        String accountCount = String.valueOf(customer.getAccounts().size());

        // Calculate total balance
        double totalBalance = 0.0;
        for (Account acc : customer.getAccounts()) {
            totalBalance += acc.getBalance();
        }
        String balance = "$" + String.format("%.2f", totalBalance);

        UIFormatter.printTableRow(customerId, name, accountCount, balance);
    }

    UIFormatter.printTableFooter();
    System.out.println();
}
```

### 5. Data Flow Diagram

```
User Input (Admin selects option 3)
    â”‚
    â”œâ”€â”€â†’ CustomerManager.handleViewAllCustomers()
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Check if customers.isEmpty()
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ If empty: Display message and return
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Display table header
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ For each customer in LinkedList<Customer>:
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ Extract: ID, Name
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ Get account count: customer.getAccounts().size()
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ Calculate total balance:
    â”‚                   â”‚         â”‚
    â”‚                   â”‚         â””â”€â”€â†’ For each Account in LinkedList<Account>:
    â”‚                   â”‚                   â”‚
    â”‚                   â”‚                   â””â”€â”€â†’ Sum acc.getBalance()
    â”‚                   â”‚
    â”‚                   â””â”€â”€â†’ UIFormatter.printTableRow(...)
    â”‚
    â””â”€â”€â†’ Return to menu
```

### 6. Example Usage

**Scenario: Multiple Customers**

**Console Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW ALL CUSTOMERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Total Customers: 4

â•”â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘Customer IDâ”‚ Name          â”‚ Accounts â”‚ Total Balance â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ C001      â”‚ John Doe      â”‚ 1        â”‚ $1000.00      â•‘
â•‘ C002      â”‚ Jane Smith    â”‚ 2        â”‚ $2500.50      â•‘
â•‘ C003      â”‚ Alice Johnson â”‚ 2        â”‚ $1700.50      â•‘
â•‘ C004      â”‚ Bob Smith     â”‚ 0        â”‚ $0.00         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**Scenario: No Customers**

**Console Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW ALL CUSTOMERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ No customers found. Use option 1 (Create Customer) to add one.
```

---

## [Admin #4] Delete Customer

### 1. Menu Option Details

| Property | Value |
|----------|-------|
| **Admin Number** | 4 |
| **Customer Number** | N/A (Admin Only) |
| **Category** | CUSTOMER_OPERATIONS |
| **Display Name** | "Delete Customer" |
| **Handler Method** | `CustomerManager.handleDeleteCustomer()` |
| **Source File** | `src/com/banking/managers/CustomerManager.java:469-529` |
| **Access Control** | ADMIN only |
| **Required Permission** | DELETE_CUSTOMER |

### 2. Purpose and Functionality

Deletes a customer from the system with **cascade delete** of all associated accounts and profile.

**What it does:**
- Prompts for customer ID with retry loop
- Shows customer details before deletion
- Confirms action with enhanced warning (if customer has accounts)
- **Cascade deletes:**
  - All associated accounts (one-to-many)
  - Customer profile (one-to-one)
  - Customer record
- Removes from `LinkedList<Customer>`
- Logs action to audit trail

**Why use this:**
- Remove inactive customers
- Data cleanup
- Demonstrates cascade delete pattern
- Shows relationship integrity (can't leave orphaned accounts)

**Security Note:** This is a destructive operation. Transaction history is lost when accounts are deleted.

### 3. Step-by-Step Code Flow

#### Steps 1-2: Menu Selection & Permission Check

Same as other admin operations.

#### Step 3: Input Collection - Customer ID with Retry Loop

**Location:** `CustomerManager.java:469-491`

```java
UIFormatter.printSectionHeader("DELETE CUSTOMER");

Customer customer = null;
while (customer == null) {  // RETRY LOOP
    String custId = this.validator.getValidatedInputWithFeedback(
        "Customer ID:",
        ValidationPatterns.CUSTOMER_ID_PATTERN,
        "(format: " + ValidationPatterns.CUSTOMER_ID_FORMAT + " e.g., C001)");

    if (custId == null) return;  // User cancelled

    customer = this.findCustomer(custId);
    if (customer == null) {
        UIFormatter.printErrorEnhanced(
            "Customer does not exist",
            "Use 'View All Customers' to see valid customer IDs.");

        if (!this.validator.confirmAction("Try again?")) {
            return;  // User chose not to retry
        }
        // Loop continues - retry
    }
}
```

**Pattern:** Retry loop with cancellation option at multiple points.

#### Step 4: Business Logic - Display Details & Confirm

**Location:** `CustomerManager.java:493-511`

```java
int accountCount = customer.getAccounts().size();

// Show customer details before deletion
System.out.println("\nCustomer to be deleted:");
UIFormatter.printDataRow("  Customer ID:", customer.getCustomerId());
UIFormatter.printDataRow("  Name:", customer.getName());
UIFormatter.printDataRow("  Associated Accounts:", String.valueOf(accountCount));
System.out.println();

// Enhanced confirmation with warning
String warningText = (accountCount > 0)
    ? "This will also delete all " + accountCount + " associated account(s) and transaction history."
    : null;

if (!this.validator.confirmActionEnhanced(
        "Are you sure you want to delete customer " + customer.getCustomerId() + "?",
        warningText)) {
    return;  // User cancelled
}

UIFormatter.printLoading("Deleting customer and associated accounts");
```

**UX Best Practice:**
- Show what will be deleted
- Warn about cascade effects
- Require confirmation
- Loading indicator for user feedback

#### Step 5: Data Updates - Cascade Delete

**Location:** `CustomerManager.java:128-141` (core CRUD method)

```java
public boolean deleteCustomer(String customerId) {
    Customer customer = this.findCustomer(customerId);
    if (customer == null) {
        UIFormatter.printError("Customer not found: " + customerId);
        return false;
    }

    // CASCADE DELETE: Remove all associated accounts
    LinkedList<Account> accountsCopy = new LinkedList<>(customer.getAccounts());
    for (Account acc : accountsCopy) {
        this.accountManager.deleteAccount(acc.getAccountNo());
    }

    // Remove customer from LinkedList
    boolean removed = this.customers.remove(customer);

    if (removed) {
        UIFormatter.printSuccess("Customer deleted: " + customerId);
    }

    return removed;
}
```

**Cascade Delete Logic:**
1. **Copy account list** to avoid `ConcurrentModificationException`
2. **Delete each account** (removes from AccountManager's LinkedList)
3. **Delete customer** (removes from CustomerManager's LinkedList)
4. **Profile auto-deleted** via garbage collection (one-to-one, no other references)

**Data Structures Updated:**
- `LinkedList<Customer> customers` - customer removed
- `LinkedList<Account> accountList` (in AccountManager) - all customer's accounts removed
- Customer's `LinkedList<Account> accounts` - becomes orphaned, garbage collected

#### Step 6: Feedback Display

**Location:** `CustomerManager.java:516-528`

```java
if (deleted) {
    UIFormatter.printSuccessEnhanced(
        "Customer deleted successfully!",
        "Customer ID: " + customer.getCustomerId(),
        "Name: " + customer.getName(),
        "Associated Accounts Deleted: " + accountCount,
        "Status: Deleted");
    InputValidator.safeLogAction(bankingSystem, "DELETE_CUSTOMER",
        "Customer ID: " + customer.getCustomerId());
} else {
    UIFormatter.printErrorEnhanced(
        "Failed to delete customer",
        "Please try again or contact support.");
}
```

#### Step 7: Audit Logging

```java
auditTrail.push(new AuditLog(
    LocalDateTime.now(),
    currentUser.getUsername(),
    currentUser.getUserRole(),
    "DELETE_CUSTOMER",
    "Customer ID: C003"
));
```

### 4. Code Snippets

**Handler Method:**

**File:** `src/com/banking/managers/CustomerManager.java:469-529`

```java
public void handleDeleteCustomer() {
    UIFormatter.printSectionHeader("DELETE CUSTOMER");

    // Retry loop for customer lookup
    Customer customer = null;
    while (customer == null) {
        String custId = this.validator.getValidatedInputWithFeedback(...);
        if (custId == null) return;

        customer = this.findCustomer(custId);
        if (customer == null) {
            UIFormatter.printErrorEnhanced("Customer does not exist", ...);
            if (!this.validator.confirmAction("Try again?")) return;
        }
    }

    int accountCount = customer.getAccounts().size();

    // Show details before deletion
    System.out.println("\nCustomer to be deleted:");
    UIFormatter.printDataRow("  Customer ID:", customer.getCustomerId());
    UIFormatter.printDataRow("  Name:", customer.getName());
    UIFormatter.printDataRow("  Associated Accounts:", String.valueOf(accountCount));

    // Confirm with warning
    String warning = (accountCount > 0)
        ? "This will also delete all " + accountCount + " associated account(s)..."
        : null;

    if (!this.validator.confirmActionEnhanced(..., warning)) return;

    UIFormatter.printLoading("Deleting customer and associated accounts");
    boolean deleted = this.deleteCustomer(customer.getCustomerId());

    if (deleted) {
        UIFormatter.printSuccessEnhanced("Customer deleted successfully!", ...);
        InputValidator.safeLogAction(bankingSystem, "DELETE_CUSTOMER", ...);
    } else {
        UIFormatter.printErrorEnhanced("Failed to delete customer", ...);
    }
}
```

**Cascade Delete Implementation:**

```java
public boolean deleteCustomer(String customerId) {
    Customer customer = this.findCustomer(customerId);
    if (customer == null) return false;

    // CASCADE: Delete all accounts first
    LinkedList<Account> accountsCopy = new LinkedList<>(customer.getAccounts());
    for (Account acc : accountsCopy) {
        accountManager.deleteAccount(acc.getAccountNo());
    }

    // Delete customer
    return this.customers.remove(customer);  // LinkedList.remove(Object)
}
```

### 5. Data Flow Diagram

```
User Input (Admin selects option 4)
    â”‚
    â”œâ”€â”€â†’ CustomerManager.handleDeleteCustomer()
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Retry loop: Get & validate customer ID
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ findCustomer(id) â†’ LinkedList search
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ Customer found â†’ Display details
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ Get account count (for warning)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ confirmActionEnhanced() with cascade warning
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ User confirms: YES/NO
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ deleteCustomer(id)
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ Copy LinkedList<Account> (avoid ConcurrentModification)
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€â†’ For each account:
    â”‚                   â”‚         â”‚
    â”‚                   â”‚         â””â”€â”€â†’ accountManager.deleteAccount(accNo)
    â”‚                   â”‚                   â”‚
    â”‚                   â”‚                   â””â”€â”€â†’ Remove from LinkedList<Account>
    â”‚                   â”‚
    â”‚                   â””â”€â”€â†’ customers.remove(customer)
    â”‚                             â”‚
    â”‚                             â””â”€â”€â†’ LinkedList.remove() - O(n)
    â”‚
    â”œâ”€â”€â†’ Log to Stack<AuditLog>
    â”‚
    â””â”€â”€â†’ Display success message
```

### 6. Example Usage

**Scenario 1: Delete Customer with Accounts (Cascade Delete)**

**Console Input/Output:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DELETE CUSTOMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Customer ID: C003

Customer to be deleted:
  Customer ID:        C003
  Name:               Alice Johnson
  Associated Accounts: 2

âš  WARNING: This will also delete all 2 associated account(s) and transaction history.
â†’ Are you sure you want to delete customer C003? (yes/no): yes

â³ Deleting customer and associated accounts...

âœ“ Customer deleted successfully!
  Customer ID: C003
  Name: Alice Johnson
  Associated Accounts Deleted: 2
  Status: Deleted
```

**Data Before:**
```java
customers (LinkedList):
  Customer{id='C003', name='Alice Johnson', accounts=[ACC003, ACC007]}

accountList (LinkedList in AccountManager):
  Account{ACC003, balance=500.00, owner='C003'}
  Account{ACC007, balance=1200.50, owner='C003'}
```

**Data After:**
```java
customers (LinkedList):
  // C003 removed

accountList (LinkedList):
  // ACC003 and ACC007 removed (cascade delete)

auditTrail (Stack):
  AuditLog{action='DELETE_CUSTOMER', details='Customer ID: C003'}
```

---

**Scenario 2: Cancel Operation**

**Console Input/Output:**
```
â†’ Customer ID: C004

Customer to be deleted:
  Customer ID:        C004
  Name:               Bob Smith
  Associated Accounts: 0

â†’ Are you sure you want to delete customer C004? (yes/no): no
â„¹ Operation cancelled.
```

**Data After:** No changes.

---

**Scenario 3: Customer Not Found with Retry**

**Console Input/Output:**
```
â†’ Customer ID: C999
âœ— Customer does not exist
  Use 'View All Customers' to see valid customer IDs.
â†’ Try again? (yes/no): yes

â†’ Customer ID: C001
// Deletion proceeds...
```

---

## Summary

### Customer Operations Recap

All 4 customer operations demonstrate key OOP and data structure concepts:

| Operation | CRUD | Data Structures | OOP Concepts |
|-----------|------|----------------|--------------|
| Create Customer | **C**REATE | LinkedList (add), Stack (push) | Encapsulation, Composition |
| View Customer Details | **R**EAD | LinkedList (search), Polymorphism (instanceof) | Inheritance, One-to-One, One-to-Many |
| View All Customers | **R**EAD | LinkedList (iteration, nested loops) | Aggregation |
| Delete Customer | **D**ELETE | LinkedList (remove, cascade) | Cascade Delete Pattern |

### Key Patterns

1. **Retry Loops:** User-friendly error recovery
2. **Cascade Delete:** Maintain referential integrity
3. **Auto-ID Generation:** Guaranteed uniqueness
4. **Confirmation Prompts:** Prevent accidental destructive operations
5. **Audit Logging:** Track all admin actions

---

**â† Back to:** [Login](6.1-Login.md) | **Up to:** [Menu Overview](6-Menu-Overview.md) | **Next:** [Account Operations â†’](6.3-Account-Ops.md)

